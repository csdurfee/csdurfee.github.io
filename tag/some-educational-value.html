<!DOCTYPE html>
<html lang="english">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mathletix | articles tagged "some educational value"</title>
    <link rel="shortcut icon" type="image/png" href="/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="mathletix Full Atom Feed" />
    <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/pygments.css" type="text/css" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="casey durfee" />
</head>
<body>
    <header>
        <nav style="overflow: hidden;">
            <ul>
                <li class="ephemeral selected"><a href="/tag/some-educational-value.html">some educational value</a></li>
                <li><a href="/">Home</a></li>
                <li><a href="/pages/about.html">About</a></li>
                <li><a href="/pages/best-of.html">Best Of</a></li>
            </ul>
        </nav>
        <div class="header_box" style="height: 50px">
        <h1><a href="/">
            <image src='' class="avatar" width="50px" /><span class="site_title">mathletix</span>
            </a></h1></div>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Jul 26, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/riding-the-waves.html" rel="bookmark" title="Permanent Link to &quot;Riding the waves&quot;">Riding the waves</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=ko8cJucsbBU" target="_blank"><img alt="Roy of the Ravers, &quot;Emotinium&quot;" src="https://img.youtube.com/vi/ko8cJucsbBU/0.jpg"></a></p>
<p>After spending several weeks in the degenerate world of sports gambling, I figured we should go get some fresh air in the land of pure statistics.</p>
<h2>The Abnormal Distribution</h2>
<p>Everybody knows what the normal distribution looks like, even if they don't know it as such. You know, the bell curve? The one from the memes?</p>
<p>In traditional statistics, the One Big Thing you need to know is called the Central Limit Theorem. It says, if you collect some data and take the average of it, that average (the sample mean) will behave in nice, predictable ways. It's the basis of basically all experimental anything.  If you take a bunch of random samples and calculate the sample mean over and over again, those sample means will look like a normal distribution, if the sample sizes are big enough. That makes it possible to draw big conclusions from relatively small amounts of data.</p>
<p>How big is "big enough"? Well, it partly depends on the shape of the data being sampled from. If the data itself is distributed like a normal distribution, it makes sense that the sample means would also be normally shaped. It takes a smaller sample size to get the sampling distributions looking like a normal distribution.</p>
<p>While a lot of things in life are normally distributed, some of them aren't. The uniform distribution is when every possible outcome is equally likely. Rolling a single die, for instance. 1-6 are all equally likely. Imagine we're trying to estimate the mean value for rolling a standard 6 sided die. </p>
<p>A clever way would be to team up sets of sides - 6 goes with 1, 5 goes with 2, 4 goes with 3. Clearly the mean value has to be 3.5, right?</p>
<p>A less clever way would be to roll a 6 sided die a bunch of times and take the average. We could repeat that process, and track all of these averages. Those averages will make a nice bell curve, with the center at 3.5.</p>
<p>The uniform distribution is sort of obnoxious if you want to calculate the sample mean. The normal distribution, and a lot of other distributions, have a big peak in the middle and tail off towards the edges. If you pick randomly from one of these distributions, it's far more likely to be close to the middle than it is to be far from the middle. With the uniform distribution, every outcome is equally likely:</p>
<p><img alt="/img/uniform.png" src="/img/uniform.png"></p>
<p>Couldn't we do even worse than the uniform distribution, though? What if the tails/outliers were even higher than the center? When I first learned about the Central Limit Theorem, I remember thinking about that - how could you define a distribution to be the most obnoxious one possible? The normal distribution is like a frowny face. The Uniform distribution is like a "not impressed" face. Couldn't we have a smiley face distribution to be the anti-normal distribution?</p>
<h2>Waveforms and probabilities.</h2>
<p>All synthesizers in electronic music use a mix of different types of simple waveforms. The sublime <a href="https://en.wikipedia.org/wiki/Roland_TB-303">TB-303</a> synth line in the song at the top is very simple. The TB-303 a monophonic synth -- a single sawtooth wave (or square wave) with a bunch of filters on top that, in the right hands, turn it from buzzy electronic noise to an emotionally expressive instrument, almost like a digitial violin or human voice.</p>
<p>This got me thinking about what probability distributions based on different types of waveforms would look like. How likely is the waveform to be at each amplitude?</p>
<p>Here's the sawtooth waveform:</p>
<p><img alt="/img/sawtooth.png" src="/img/sawtooth.png"></p>
<p>If we randomly sample from this wave (following a uniform distribution -- all numbers on the x axis are equally likely) and record the y value, then plot the values as a histogram, what would it look like? Think of it like we put a piece of toast on the Y axis of the graph, the X axis is time. How will the butter be distributed? </p>
<p>It should be a flat line, like the Uniform distribution, since each stroke of butter is at a constant rate. We're alternating between a very fast wipe and a slower one, but in both cases, it doesn't spend any more time on one section of bread than another because it's a straight line.</p>
<p><img alt="/img/sawtooth-distro.png" src="/img/sawtooth-distro.png"></p>
<h2>Advanced breakfast techniques</h2>
<p>A square wave spends almost no time in the middle of the bread, so nearly all the butter will be at the edges. That's not a very interesting graph. What about a sine wave?</p>
<p>The sawtooth wave always has a constant slope, so the butter is evenly applied. With the sine wave, the slope changes over time. Because of that, the butter knife ends up spending more time at the extreme ends of the bread, where the slope is shallow, compared to the middle of the bread. The more vertical the slope, the faster the knife passes over that bit of bread, and the less butter it gets.</p>
<p>If we sample a bunch of values from the sine wave and plot their Y values as a histogram, we'll get something that looks like a smiley face -- lots of butter near the edges, less butter near the center of the toast. Or perhaps, in tribute to Ozzy, the index and pinky fingers of someone throwing the devil horns.</p>
<p><img alt="/img/arcsine-from-sine.png" src="/img/arcsine-from-sine.png"></p>
<p>That's a perfectly valid buttering strategy in my book. The crust near the edges tends to be drier, and so can soak up more butter. You actually want to go a bit thinner in the middle, to maintain the structural integrity of the toast.</p>
<p>This distribution of butter forms a probability distribution called the arcsine distribution. It's an anti-normal distribution -- fat in the tails, skinny in the middle. A "why so serious?" distribution the Joker might appreciate. The mean is the least likely value, rather than the most likely value. And yet, the Central Limit Theorem still holds. The mean of even a fairly small number of values will behave like a Normal distribution.</p>
<p>Here are 1,000 iterations of an average of two samples from the arcsine distribution:</p>
<p><img alt="/img/arcsin-approx-2.png" src="/img/arcsin-approx-2.png"></p>
<p>And averages of 5 samples:</p>
<p><img alt="/img/arcsin-approx-5.png" src="/img/arcsin-approx-5.png"></p>
<p>And 30 samples at a time. Notice how the x range has shrunk down.</p>
<p><img alt="/img/arcsin-approx-30.png" src="/img/arcsin-approx-30.png"></p>
<p>There are a lot of distributions that produce that U-type shape. They're known as <a href="https://en.wikipedia.org/wiki/Bathtub_curve">bathtub curves</a>. They come up when plotting the failure rates of devices (or people). For a lot of things, there's an elevated risk of failure near the beginning and the end, with lower risk in the middle. The curve is showing conditional probability -- for an iPhone to fail on day 500, it has to have not failed on the first 499 days.</p>
<p><img alt="/img/Bathtub_curve.svg" src="/img/Bathtub_curve.svg"></p>
<p>(source: Wikipedia/Public Domain, <a href="https://commons.wikimedia.org/w/index.php?curid=7458336">https://commons.wikimedia.org/w/index.php?curid=7458336</a>)</p>
<h2>Particle man vs triangle man</h2>
<p>The Uniform distribution isn't really that ab-Normal. It's flat, but it's very malleable. It turns into the normal distribution almost instantly. The symmetry helps.</p>
<p>If we take a single sample from a Uniform distribution over and over again, and plot a histogram, it's going to look flat, because every outcome is equally likely.</p>
<p>If we take the sum (or average) of two Uniform random variables, what would that look like? We're going to randomly select two numbers between 0 and 1 and sum them up. The result will be between 0 and 2. But some outcomes will be more likely than others.  The extremes (0 and 2) should be extremely unlikely, right? Both the random numbers would have to be close to 0 for the sum to be, and vice versa. There are a lot of ways to get a sum of .5, though. It could be .9 and .1, or .8 and .2, and so on.</p>
<p>If you look online, you can find many explanations of how to get the PDF of the sum of two Uniform distributions using calculus. (<a href="https://courses.cs.washington.edu/courses/cse312/20su/files/student_drive/5.5.pdf">Here's a good one</a>). While formal proofs are important, it's not very intuitive. So, here's another way to think of it.</p>
<p>Let's say we're taking the sum of two dice instead of two Uniform random variables.  We're gonna start with two 4 sided dice. It will be obvious that we can scale the number of faces up, and the pattern will hold.</p>
<p>What are the possible combinations of dice? The dice are independent, so each combination is equally likely. Let's write them out by columns according to their totals:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(1, 1)</td>
<td>(1,2)</td>
<td>(1,3)</td>
<td>(1,4)</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>(2,1)</td>
<td>(2,2)</td>
<td>(2,3)</td>
<td>(2,4)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>(3,1)</td>
<td>(3,2)</td>
<td>(3,3)</td>
<td>(3,4)</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>(4,1)</td>
<td>(4,2)</td>
<td>(4,3)</td>
<td>(4,4)</td>
</tr>
</tbody>
</table>
<p>If we write all the possibilities out like this, it's gonna look like a trapezoid, whether there are 4 faces on the dice, or 4 bajillion. Each row will have one more column that's blank than the one before, and one column that's on its own off to the right. </p>
<p>If we consolidate the elements, we're gonna get a big triangle, right? Each column up to the mean will have one more combo, and each column after will have one less.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(1, 1)</td>
<td>(1,2)</td>
<td>(1,3)</td>
<td>(1,4)</td>
<td>(2,4)</td>
<td>(3,4)</td>
<td>(4,4)</td>
</tr>
<tr>
<td>-</td>
<td>(2,1)</td>
<td>(2,2)</td>
<td>(2,3)</td>
<td>(3,3)</td>
<td>(4,3)</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>(3,1)</td>
<td>(3,2)</td>
<td>(4,2)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>(4,1)</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>With a slight re-arrangement of values, it's clear the triangle builds up with each extra face we add to the dice.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(1, 1)</td>
<td>(1,2)</td>
<td>(2,2)</td>
<td>(2,3)</td>
<td>(3,3)</td>
<td>(3,4)</td>
<td>(4,4)</td>
</tr>
<tr>
<td>-</td>
<td>(2,1)</td>
<td>(1,3)</td>
<td>(3,2)</td>
<td>(2,4)</td>
<td>(4,3)</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>(3,1)</td>
<td>(1,4)</td>
<td>(4,2)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>(4,1)</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>The results for two 2 sided dice are embedded in the left 3 columns of table, then the results for two 3 sided dice on top of them, then two 4 sided dice. Each additional face will add 2 columns to the right. I'm not gonna formally prove anything, but hopefully it's obvious that it will always make a triangle.</p>
<p>That's the <a href="https://en.wikipedia.org/wiki/Triangular_distribution#Distribution_of_the_mean_of_two_standard_uniform_variables">triangular distribution</a>.</p>
<p>Here's a simulation, calculating the sum of two random uniform variables over and over, and counting their frequencies:</p>
<p><img alt="/img/shaggy-triangle.png" src="/img/shaggy-triangle.png"></p>
<h1>3 is the magic number</h1>
<p>The sum (or average) of 3 Uniform random variables looks a whole lot like the normal distribution. The sides of the triangle round out, and we get something more like a bell curve. It's more than a parabola because the slope is changing on the sides. Here's what it looks like in simulation:</p>
<p><img alt="/img/shaggy-parabola.png" src="/img/shaggy-parabola.png"></p>
<p>Here are three 5 sided dice. It's no longer going up and down by one step per column. The slope is changing as we go up and down the sides.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">3</th>
<th style="text-align: left;">4</th>
<th style="text-align: left;">5</th>
<th style="text-align: left;">6</th>
<th style="text-align: left;">7</th>
<th style="text-align: left;">8</th>
<th style="text-align: left;">9</th>
<th style="text-align: left;">10</th>
<th style="text-align: left;">11</th>
<th style="text-align: left;">12</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">(1, 1, 1)</td>
<td style="text-align: left;">(2, 1, 1)</td>
<td style="text-align: left;">(2, 2, 1)</td>
<td style="text-align: left;">(2, 2, 2)</td>
<td style="text-align: left;">(3, 3, 1)</td>
<td style="text-align: left;">(3, 3, 2)</td>
<td style="text-align: left;">(3, 3, 3)</td>
<td style="text-align: left;">(4, 4, 2)</td>
<td style="text-align: left;">(4, 4, 3)</td>
<td style="text-align: left;">(4, 4, 4)</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 2, 1)</td>
<td style="text-align: left;">(2, 1, 2)</td>
<td style="text-align: left;">(3, 2, 1)</td>
<td style="text-align: left;">(3, 2, 2)</td>
<td style="text-align: left;">(3, 2, 3)</td>
<td style="text-align: left;">(4, 4, 1)</td>
<td style="text-align: left;">(4, 3, 3)</td>
<td style="text-align: left;">(4, 3, 4)</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 1, 2)</td>
<td style="text-align: left;">(1, 2, 2)</td>
<td style="text-align: left;">(3, 1, 2)</td>
<td style="text-align: left;">(3, 1, 3)</td>
<td style="text-align: left;">(2, 3, 3)</td>
<td style="text-align: left;">(4, 3, 2)</td>
<td style="text-align: left;">(4, 2, 4)</td>
<td style="text-align: left;">(3, 4, 4)</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(3, 1, 1)</td>
<td style="text-align: left;">(2, 3, 1)</td>
<td style="text-align: left;">(2, 3, 2)</td>
<td style="text-align: left;">(4, 3, 1)</td>
<td style="text-align: left;">(4, 2, 3)</td>
<td style="text-align: left;">(3, 4, 3)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 3, 1)</td>
<td style="text-align: left;">(2, 1, 3)</td>
<td style="text-align: left;">(2, 2, 3)</td>
<td style="text-align: left;">(4, 2, 2)</td>
<td style="text-align: left;">(4, 1, 4)</td>
<td style="text-align: left;">(3, 3, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 1, 3)</td>
<td style="text-align: left;">(1, 3, 2)</td>
<td style="text-align: left;">(1, 3, 3)</td>
<td style="text-align: left;">(4, 1, 3)</td>
<td style="text-align: left;">(3, 4, 2)</td>
<td style="text-align: left;">(2, 4, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 2, 3)</td>
<td style="text-align: left;">(4, 2, 1)</td>
<td style="text-align: left;">(3, 4, 1)</td>
<td style="text-align: left;">(3, 2, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(4, 1, 1)</td>
<td style="text-align: left;">(4, 1, 2)</td>
<td style="text-align: left;">(3, 1, 4)</td>
<td style="text-align: left;">(2, 4, 3)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 4, 1)</td>
<td style="text-align: left;">(2, 4, 1)</td>
<td style="text-align: left;">(2, 4, 2)</td>
<td style="text-align: left;">(2, 3, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 1, 4)</td>
<td style="text-align: left;">(2, 1, 4)</td>
<td style="text-align: left;">(2, 2, 4)</td>
<td style="text-align: left;">(1, 4, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 4, 2)</td>
<td style="text-align: left;">(1, 4, 3)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 2, 4)</td>
<td style="text-align: left;">(1, 3, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
</tbody>
</table>
<p>The notebook has a function to print it for any number of faces and dice. Go crazy if you like, but it quickly becomes illegible.</p>
<p>Here's the results of three 12 sided dice:</p>
<p><img alt="/img/three-twelves.png" src="/img/three-twelves.png"></p>
<p>This isn't a Normal distribution, but it sure looks close to one.   </p>
<h2>Toast triangles</h2>
<p>What if we feed the triangular distribution through the <code>sin()</code> function? To keep the toast analogy going, I guess we're spreading the butter with a sine wave pattern, but changing how hard we're pressing down on the knife to match the triangular distribution -- slow at first, then ramping up, then ramping down.</p>
<p>Turns out, if we take the sine of the sum of two uniform random variables (defined from the range of -pi to +pi), we'll get the arcsin distribution again! I don't know if that's surprising or not, but there you go.</p>
<h2>Knowing your limits</h2>
<p>There's a problem with the toast analogy. (Well, at least one. There may be more, but I ate the evidence.)</p>
<p>The probability density function of the arcsine distribution looks like this:</p>
<p>It goes up to infinity at the edges!</p>
<p><img alt="/img/arcsine-pdf.png" src="/img/arcsine-pdf.png"></p>
<p>The derivative of the <code>arcsin</code> function is <code>1/sqrt(1-x**2)</code> which goes to infinity as x approaches 0 or 1. That's what gives the arcsine distribution its shape. That also sort of breaks the toast analogy. Are we putting an infinite amount of butter on the bread for an infinetesimal amount of time at the ends of the bread? You can break your brain thinking about that, but you should feel confident that we put a finite amount of butter on the toast between any two intervals of time. We're always concerned with the defined amount of area underneath the PDF, not the value at a singular point.</p>
<p>Here's a histogram of the actual arcsine distribution -- 100,000 sample points put into 1,000 bins:</p>
<p><img alt="/img/arcsine-hist.png" src="/img/arcsine-hist.png"></p>
<p>About 9% of the total probability is in the leftmost and rightmost 0.5% of the distribution, so the bins at the edges get really, really tall, but they're also really, really skinny. there's a bound on how big they can be.</p>
<p>The CDF (area under the curve of the PDF) of the arcsine distribution is well behaved, but its slope goes to infinity at the very edges.</p>
<p><img alt="/img/arcsine-cdf.png" src="/img/arcsine-cdf.png"></p>
<h2>One for the road</h2>
<p>The <code>sinc()</code> function is defined as <code>sin(x)/x</code>. It doesn't lead to a well-known distribution as far as I know, but it looks cool, like the logo of some aerospace company from the 1970's, so here you go:</p>
<p><img alt="/img/sinc.png" src="/img/sinc.png"></p>
<p>Would I buy a Camaro with that painted on the hood? Yeah, probably.</p>
<h2>An arcsine of things to come</h2>
<p>The arcsine distribution is extremely important in the field of random walks. Say you flip a coin to decide whether to turn north or south every block. How far north or south of where you started will you end up? How many times will you cross the street you started on?</p>
<p>I showed with the hot hand research that our intuitions about randomness are bad. When it comes to random walks, I think we do even worse. Certain <em>sensible</em> things almost never happen, while <em>weird</em> things happen all the time, and the arcsine distribution explains a lot of that.</p>
<h3>References/further reading</h3>
<ul>
<li><a href="https://www.johndcook.com/blog/2009/02/12/sums-of-uniform-random-values/">https://www.johndcook.com/blog/2009/02/12/sums-of-uniform-random-values/</a></li>
<li><a href="https://www.jstor.org/stable/2287407">https://www.jstor.org/stable/2287407</a></li>
<li><a href="https://archive.org/details/dli.ernet.5666/">https://archive.org/details/dli.ernet.5666/</a></li>
</ul>
                <div class="clear"></div>

                <div class="info">
                    <a href="/riding-the-waves.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/statistics.html" rel="tag">statistics</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/some-educational-value.html" class="tags selected">some educational value</a>
                </div>
            </article>            <h4 class="date">Jul 31, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/harmonics.html" rel="bookmark" title="Permanent Link to &quot;Harmonics&quot;">Harmonics</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=5Ocq8UlLuuw" target="_blank"><img alt="Donna Summer and Giorgio Moroder, &quot;I Feel Love&quot; (Patrick Cowley Remix)" src="https://img.youtube.com/vi/5Ocq8UlLuuw/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=5Ocq8UlLuuw" target="_blank">Donna Summer and Giorgio Moroder, "I Feel Love" (Patrick Cowley Remix)</a></p>
<p>Notebook: <a href="https://github.com/csdurfee/csdurfee.github.io/blob/main/harmonics.ipynb">https://github.com/csdurfee/csdurfee.github.io/blob/main/harmonics.ipynb</a></p>
<p>I was gonna do random walks this week, but the thing about random walks is you don't know where you're gonna end up, and I ended up back at last week's topic again. </p>
<p>Last time, we saw that the sine wave, sawtooth wave and square wave produced very different distributions.</p>
<p>All three waveforms are used in electronic music, and they all have different acoustic properties. A sine wave sounds like a "boop" -- think of the sound they play to censor someone who says a swear word on the TV.  That's a sine wave with a frequency of 1000Hz. Sawtooth waves are extremely buzzy. A square wave has, ironically, kind of a round sound, at least as far as how it gets used in electronic music.  A good example is the bass line to this week's song. </p>
<p>It's not a pure square wave, and it's rare to ever hear pure sawtooth or square waves because they're harsh on the ears. Usually multiple waveforms are combined together and then passed through various filters and effects -- in other words, synthesized. </p>
<p>Pretty much every sound you've ever heard is a mix of different frequencies. Only sine waves are truly pure, just a single frequency. I tried looking for an actual musical instrument that produces pure sine waves, and the closest thing (according to the internet, at least) is a tuning fork. </p>
<p>Any other musical instrument, or human voice, or backfiring car, will produce overtones. There's one note that is perceived as the <em>fundamental frequency</em>, but every sound is kind of like a little chord when the overtones are included. </p>
<p>For musical instruments, the loudest overtones are generally at frequencies that are a multiple of the original frequency. These overtones are called <em>harmonics</em>.</p>
<p>For instance, if I play a note at 400 Hz on a guitar, it will also produce harmonics at 800 Hz (2x the fundamental frequency), 1200 Hz (3x), 1600 Hz (4x), 2000 Hz (5x), and so on. This corresponds to the <a href="https://en.wikipedia.org/wiki/Harmonic_series_(mathematics)">harmonic series in mathematics</a>. It's the sum of the ratios of the wavelengths of the harmonics to the fundamental frequency: 1 + 1/2 + 1/3 + 1/4 + 1/5 + ...</p>
<h3>The clarinet is the squarest instrument</h3>
<p>I played the clarinet in grade school and I am the biggest dork on the planet, so it's certainly metaphorically true. But it's also literally true.</p>
<p>There's a lot that goes into exactly which overtones get produced by a physical instrument, but most instruments put out the whole series of harmonics. <a href="https://newt.phys.unsw.edu.au/jw/clarinetacoustics.html#harmonics">The clarinet is different</a>. Because of a clarinet's physical shape, it pretty much only produces odd harmonics. So, in our example, 400 Hz, 1200 Hz, 2000 Hz, etc.</p>
<p>The square wave is like an idealized version of a clarinet -- it also only puts out odd harmonics. This is a result of how a square wave is constructed. In the real world, they're formed out of a combination of sine waves. Which sine waves? You guessed it -- the ones that correspond to the odd harmonic frequencies.</p>
<p>Here's the fundamental frequency combined with the 3rd harmonic:</p>
<p><img alt="/img/square3.png" src="/img/square3.png"></p>
<p>It already looks a bit square-wavey. Additional harmonics make the square parts a bit more square.  Here's what it looks like going up to the 19th harmonic:</p>
<p><img alt="/img/square21.png" src="/img/square21.png"></p>
<p>In the real world, we can only add a finite number of harmonics, but if we could combine an infinite number of them, we would get the ideal square wave. This is called the <a href="https://en.wikipedia.org/wiki/Fourier_series">Fourier series</a> of the square wave.</p>
<p>Here's an illustration to help show how the square wave gets built up:</p>
<p><img alt="/img/square-buildup.png" src="/img/square-buildup.png"></p>
<p>The red wave is the fundamental frequency. The orange square-ish wave is the result of combining the other colored waves with the red wave.</p>
<p>The sum normally would be scaled up a bit (multiplied by 4/pi), but it's easier without the scaling to see how the other waves sort of hammer the fundamental frequency into the shape of the square wave. At some points they are pushing it up, and other points pulling it down.</p>
<p>Perhaps this graph makes it clearer. The red is the fundamental, the yellow is the sum of all the other harmonics, and the orange is the combination of the two:</p>
<p><img alt="/img/combine-harmonics-square.png" src="/img/combine-harmonics-square.png"></p>
<p>Where the yellow is above the X axis, it's pulling the fundamental frequency up, and where it's below, it's pulling the fundamental down.</p>
<h3>The sawtooth</h3>
<p>A sawtooth wave is what you get when you combine all the harmonics, odd and even. Like the square wave, it starts to take its basic shape right away. Here's the fundamental plus the second harmonic:</p>
<p><img alt="/img/sawtooth2.png" src="/img/sawtooth2.png"></p>
<p>And here it is going all the way up to the 10th harmonic:</p>
<p><img alt="/img/sawtooth10.png" src="/img/sawtooth10.png"></p>
<p>Here are the red fundamental plus the yellow harmonics to produce the orange sawtooth wave:</p>
<p><img alt="/img/combine-harmonics-saw.png" src="/img/combine-harmonics-saw.png"></p>
<h3>Getting even</h3>
<p>What about only the even harmonics? Is that a thing? Not in the natural world as far as I know, but there's nothing stopping me from making one. (It wouldn't be the worst musical crime I've ever committed.)</p>
<p>Here's what a combo of just the even harmonics looks like:</p>
<p><img alt="/img/even-harmonics.png" src="/img/even-harmonics.png"></p>
<p>Thanks to a little code from the pygame project, it's easy to turn that waveform into a sound file. It sounds like an angry computer beep, with a little flutter mixed in.</p>
<p><a href="/audio/evens_clean.wav" target="_blank">Here's an audio sample</a></p>
<h3>In my prime</h3>
<p>The <a href="https://mathworld.wolfram.com/HarmonicSeriesofPrimes.html">harmonic series of primes</a> is what it sounds like: the harmonic series, but just the prime numbers: 1 + 1/2 + 1/3 + 1/5 + 1/7 + 1/11 + 1/13 + ....</p>
<p>Although it's important in mathematics, I don't have a good musical reason to do this. But if you can throw the prime numbers into something, you gotta do it.</p>
<p>As a sound, I kinda like it. It's nice and throaty. <a href="/audio/primes.wav" target="_blank">Here's what it sounds like.</a></p>
<p>It doesn't really sound like a sawtooth wave or a square wave to me. Here's the waveform:</p>
<p><img alt="/img/prime-waveform.png" src="/img/prime-waveform.png"></p>
<p>Here's what the distribution of amplitudes looks like:</p>
<p><img alt="/img/prime-amp.png" src="/img/prime-amp.png"></p>
<h3>Dissonance</h3>
<p>Some of the overtones of the harmonic series don't correspond with the 12 notes of the modern western musical scale (called 12 tone equal temprament, or 12TET). The first 4 harmonics of the series are nice and clean, but after that they get weird. Each harmonic in the series is smaller in amplitude than the previous one, so it has less of an effect on the shape of the final wave. So the dissonance is there, but it's way in the background.</p>
<p>The prime number bloop I made above should be extra <em>weird</em>. The 2nd and 3rd harmonics are included, so those will sound nice, but after that they are at least a little off the standard western scale.</p>
<p>Say we're playing the <em>prime bloop</em> at A4 (the standard pitch used for tuning).  Here's how the harmonics work out. A cent is 1% of a semitone. So a note that is off by 50 cents is right between two notes on the 12 tone scale.</p>
<table>
<thead>
<tr>
<th>harmonic #</th>
<th>frequency</th>
<th>pitch</th>
<th>error</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>440 Hz</td>
<td>A4</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>880 Hz</td>
<td>A5</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1320</td>
<td>E6</td>
<td>+2 cents</td>
</tr>
<tr>
<td>5</td>
<td>2200</td>
<td>C#7</td>
<td>-14 cents</td>
</tr>
<tr>
<td>7</td>
<td>3080</td>
<td>G7</td>
<td>+31 cents</td>
</tr>
<tr>
<td>11</td>
<td>4840</td>
<td>D#8</td>
<td>-49 cents</td>
</tr>
<tr>
<td>13</td>
<td>5720</td>
<td>F8</td>
<td>+41 cents</td>
</tr>
<tr>
<td>17</td>
<td>7480</td>
<td>A#8</td>
<td>+5 cents</td>
</tr>
</tbody>
</table>
<p>(Note the 3rd harmonic, E6, is a little <em>off</em> in 12TET, despite being a <em>perfect fifth</em> -- an exact 3:2 ratio with the A5.)</p>
<h3>Harmonics aren't everything</h3>
<p>While it's true that any audio can be decomposed into a bunch of sine waves, the fundamental frequency and the harmonics aren't really what gives an instrument its unique timbre. It's hundreds or thousands of tiny overtones that don't line up with the harmonics.</p>
<p>Here are the spectra of two different piano sounds playing at 220 Hz. One is a somewhat fake piano sound (Fruity DX10), the other a natural, rich sounding one (LABS Soft Piano, which you might've heard before if you listen to those "Lofi Hip Hop Beats to Doomscroll/Not Study To" type playlists). Can you guess which is which?</p>
<p><img alt="/img/real-piano.png" src="/img/real-piano.png"></p>
<p><img alt="/img/fake-piano.png" src="/img/fake-piano.png"></p>
<p>The answer may surprise you. I mean, it can't be that surprising since there are only 2 options. But I'd probably get it wrong, if I didn't already know which is which.</p>
<h3>Sources/Notes</h3>
<p><a href="https://www.phys.unsw.edu.au/music/">This website from UNSW was invaluable</a>, particularly <a href="https://newt.phys.unsw.edu.au/jw/harmonics.html">https://newt.phys.unsw.edu.au/jw/harmonics.html</a></p>
<p>Code used to generate the audio: <a href="https://stackoverflow.com/questions/56592522/python-simple-audio-tone-generator">https://stackoverflow.com/questions/56592522/python-simple-audio-tone-generator</a></p>
<p>"The internet" claiming the sound of a tuning fork is a sine wave here (no citation given): <a href="https://en.wikipedia.org/wiki/Tuning_fork#Description">https://en.wikipedia.org/wiki/Tuning_fork#Description</a>.</p>
<p>There are many good videos on Youtube about 12TET and Just Intonation, by people who know more about music than me. Here's one from David Bennett: <a href="https://www.youtube.com/watch?v=7JhVcGtT8z4">https://www.youtube.com/watch?v=7JhVcGtT8z4</a></p>
                <div class="clear"></div>

                <div class="info">
                    <a href="/harmonics.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/math.html" rel="tag">math</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/some-educational-value.html" class="tags selected">some educational value</a>
                </div>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/tcarwash/blue-penguin-dark">Blue Penguin Dark</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>