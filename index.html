<!DOCTYPE html>
<html lang="english">
        <head>
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>mathletix</title>
                        <link rel="stylesheet" href="/theme/css/main.css" />
                                <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="mathletix Atom Feed" />
        </head>

        <body id="index" class="home">
                <header id="banner" class="body">
                        <h1><a href="/">mathletix</a></h1>
                        <nav><ul>
                                                <li><a href="/category/machine-learning.html">machine learning</a></li>
                                                <li><a href="/category/sports-analytics.html">sports analytics</a></li>
                                                <li><a href="/category/statistics.html">statistics</a></li>
                        </ul></nav>
                </header><!-- /#banner -->

                <aside id="featured" class="body">
                    <article>
                        <h1 class="entry-title"><a href="/lesimulation.html">LeSimulation</a></h1>
<footer class="post-info">
        <abbr class="published" title="2025-06-18T10:20:00-10:00">
                Published: Wed 18 June 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/sports-analytics.html">sports analytics</a>.</p>
<p>tags: <a href="/tag/basketball.html">basketball</a> <a href="/tag/the-hot-hand.html">the hot hand</a> </p>        
</footer><!-- /.post-info --><p>(As usual, all code and notebooks are available at <a href="https://github.com/csdurfee/hot_hand">https://github.com/csdurfee/hot_hand</a>)</p>
<p>Last time, we saw that LeBron James was by far the un-streakiest player in the NBA over the last 20 years and found out that it's at least partly caused by shot selection. He takes both lower percentage shots than average when he's shooting well and higher percentage shots than average when he's shooting poorly.</p>
<h2>LeMartingale</h2>
<p>I got the question of why it's OK to use a player's overall FG% to gauge their streakiness. We know that every shot a player takes has a slightly different level of difficulty, and thus a different probability that it will go in. Shouldn't that affect the streakiness?</p>
<p>It's a good question.  Let's say you've got a bag with 2 types of coins inside. One of them comes up heads 40% of the time, the other comes up heads 60% of the time. You can't tell which is which. If you pick a coin randomly out of the bag and flip it, what are the chances, on average, it comes up heads? </p>
<p>It's 50%, right? The selecting of the coin and the flipping of the coin are two independent steps. We can multiply the probabilities at each step together, so the overall chances of heads are <code>(.5 * .4) + (.5 * .6) = .5</code>. If we kept randomly selecting from the bag and flipping a coin, the results would be indistinguishable from just flipping a single fair coin over and over.</p>
<p>In math, this is known as a <a href="https://en.wikipedia.org/wiki/Martingale_(probability_theory)">Martingale</a>. Previous outcomes don't give us information about the next event. (More in depth explanation <a href="https://www.cs.yale.edu/homes/aspnes/pinewiki/Martingales.html">here</a>).  That's different from LeBron. We know he essentially chooses the 60% heads coin when he's been getting a lot of tails recently, and the 60% tails coin when he's been getting a lot of heads recently.</p>
<h2>LeSimulation</h2>
<p>If I create a simulation of LeBron James that uses his exact shooting tendencies and FG percentages, and the shot selection is totally random, it shouldn't show any streaky or unstreaky tendencies beyond expected by chance. Let's see what LeSimulation looks like.</p>
<p>At the end of the last edition, I got LeBron's shooting stats:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Above</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="k">Break</span><span class="w"> </span><span class="mi">3</span><span class="w">        </span><span class="mi">0</span>.<span class="mi">344598</span>
<span class="nv">Backcourt</span><span class="w">                </span><span class="mi">0</span>.<span class="mi">058824</span>
<span class="nv">In</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">Paint</span><span class="w"> </span><span class="ss">(</span><span class="nv">Non</span><span class="o">-</span><span class="nv">RA</span><span class="ss">)</span><span class="w">    </span><span class="mi">0</span>.<span class="mi">401369</span>
<span class="nv">Left</span><span class="w"> </span><span class="nv">Corner</span><span class="w"> </span><span class="mi">3</span><span class="w">            </span><span class="mi">0</span>.<span class="mi">394799</span>
<span class="nv">Mid</span><span class="o">-</span><span class="nv">Range</span><span class="w">                </span><span class="mi">0</span>.<span class="mi">379890</span>
<span class="nv">Restricted</span><span class="w"> </span><span class="nv">Area</span><span class="w">          </span><span class="mi">0</span>.<span class="mi">720138</span>
<span class="nv">Right</span><span class="w"> </span><span class="nv">Corner</span><span class="w"> </span><span class="mi">3</span><span class="w">           </span><span class="mi">0</span>.<span class="mi">370370</span>
</code></pre></div>

<p>And shooting tendencies (what percent of the time he takes each type of shot):</p>
<div class="highlight"><pre><span></span><code><span class="nv">Above</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="k">Break</span><span class="w"> </span><span class="mi">3</span><span class="w">        </span><span class="mi">0</span>.<span class="mi">204940</span>
<span class="nv">Backcourt</span><span class="w">                </span><span class="mi">0</span>.<span class="mi">001160</span>
<span class="nv">In</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">Paint</span><span class="w"> </span><span class="ss">(</span><span class="nv">Non</span><span class="o">-</span><span class="nv">RA</span><span class="ss">)</span><span class="w">    </span><span class="mi">0</span>.<span class="mi">109652</span>
<span class="nv">Left</span><span class="w"> </span><span class="nv">Corner</span><span class="w"> </span><span class="mi">3</span><span class="w">            </span><span class="mi">0</span>.<span class="mi">014431</span>
<span class="nv">Mid</span><span class="o">-</span><span class="nv">Range</span><span class="w">                </span><span class="mi">0</span>.<span class="mi">267715</span>
<span class="nv">Restricted</span><span class="w"> </span><span class="nv">Area</span><span class="w">          </span><span class="mi">0</span>.<span class="mi">386442</span>
<span class="nv">Right</span><span class="w"> </span><span class="nv">Corner</span><span class="w"> </span><span class="mi">3</span><span class="w">           </span><span class="mi">0</span>.<span class="mi">015660</span>
</code></pre></div>

<p>The simulation randomly chooses a shot type, based on the actual tendencies, then attempts a shot at the corresponding FG%.</p>
<p><img alt="le-fake-career" src="/img/le-fake-career.png"></p>
<p>The z-scores look like they should -- mean is very close to 0, standard deviation close to 1. No streaky/unstreaky tendencies, as promised. No evidence that shot attempts were at different FG%.</p>
<h2>LeSimulation 2 - last 5 FG%</h2>
<p>My next simulation uses LeBron's FG% over his last 5 shots. We've seen he shoots the best with 0 makes in his last 5; the worst with 5 makes in his last 5. The simulation uses his exact percentages at each level. For the first 5 shots of every game, it uses his career FG%.</p>
<p>I ran the simulation 1,000 times. Here are the z-scores:</p>
<p><img alt="le-fake-career-2" src="/img/le-fake-career-2.png"></p>
<p>As expected, this simulation is pretty un-streaky:</p>
<div class="highlight"><pre><span></span><code>count    1000.000000
mean        1.635843
std         0.985464
min        -1.665389
25%         1.001550
50%         1.623242
75%         2.346864
max         4.509869
</code></pre></div>

<p>It's still not nearly as unstreaky as the man himself, though -- Lebron's z score of 5.9 would be way bigger than the largest value in 1,000 simulations (4.5). So he'd still be an outlier compared to these simulated un-streaky players.</p>
<h2>LeSimulation 3 -- No resetting streaks</h2>
<p>What about a fake player where the streaks don't reset between games? That should make the simulated player even more unstreaky.</p>
<p>In this version of the simulation, every shot will be influenced by the FG% of the previous 5 shots, even if they happened in the previous game(s).</p>
<p><img alt="le-fake-career-3" src="/img/le-fake-career-3.png"></p>
<p>Here are the corresponding z-scores:</p>
<div class="highlight"><pre><span></span><code>count    1000.000000
mean        2.179821
std         0.963330
min        -1.033468
25%         1.536542
50%         2.203681
75%         2.865350
max         5.073167
</code></pre></div>

<p>So, the mean went from 1.6 to 2.2, and the max z score went from 4.5 to 5.1. That's still not nearly unstreaky enough to match LeReal LeBron, but at least it's closer.</p>
<p>It's possible that if we tracked the last 7 shots, or 9, instead of 5, we would see even more of a dramatic change in FG percentage. Or there's some other factor I haven't considered that is adding unstreakiness, such as the fact that his FG percentage tends to go down the more shots he's taken in a game.</p>
<h2>DoppLeGangers</h2>
<p>I was curious if I could find similar players to LeBron. There's a good way to do that, but I wanted to try my own way first. I found players where, like LeBron, their FG% steadily declines the more shots they've made out of the last 5.  There are 18 such players: Karl Malone, Grant Hill, Ben Wallace, Eddie House, Michael Redd, Jarvis Hayes, Andres Nocioni, JJ Redick, Nicolas Batum, Goran Dragic, DeMar DeRozan, Patrick Beverley, Marcus Morris Sr., Bradley Beal, Kelly Oubre Jr., Norman Powell, Donte DiVincenzo, and Landry Shamet.</p>
<p>Overall, these players have a mean z-score of 1.47, which is pretty impressive, but except for Goran Dragic, there isn't much overlap over the players with the highest overall z scores. 18 players is a pretty small sample size, as well.</p>
<p>I also looked at a broader set of players where at least 4 out of the 5 comparisons were decreasing. This gave 180 players, with an average z score of 1.0. </p>
<h3>LeRight way</h3>
<p>The right way to identify LeBron-alikes is to use a similarity metric that I didn't invent. The fg percentages after 0..5/5 makes are sort of like a probability distribution. There's a lot of work in statistics and machine learning around comparing distributions -- could this data come from this distribution? Is it a good representation of the observed data? A common tool to use is relative entropy, also known as <a href="https://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence">KL divergence</a>.</p>
<p>If we normalize the shooting percentages and compare them to LeBron's, players with a low relative entropy should show the same tendency to shoot better when they're shooting worse than average over their last 5, and vice versa.</p>
<p>For example, LeBron's last 5 percentages are:</p>
<div class="highlight"><pre><span></span><code><span class="mf">0</span><span class="w">    </span><span class="mf">0.564612</span>
<span class="mf">1</span><span class="w">     </span><span class="mf">0.50712</span>
<span class="mf">2</span><span class="w">    </span><span class="mf">0.505937</span>
<span class="mf">3</span><span class="w">    </span><span class="mf">0.496538</span>
<span class="mf">4</span><span class="w">    </span><span class="mf">0.473849</span>
<span class="mf">5</span><span class="w">    </span><span class="mf">0.464052</span>
</code></pre></div>

<p>By normalizing them, they look like a probability distribution (they all add up to one) but it still has the same shape as the raw values if we made a bar chart. </p>
<div class="highlight"><pre><span></span><code><span class="mf">0</span><span class="w">    </span><span class="mf">0.187448</span>
<span class="mf">1</span><span class="w">     </span><span class="mf">0.16836</span>
<span class="mf">2</span><span class="w">    </span><span class="mf">0.167968</span>
<span class="mf">3</span><span class="w">    </span><span class="mf">0.164847</span>
<span class="mf">4</span><span class="w">    </span><span class="mf">0.157315</span>
<span class="mf">5</span><span class="w">    </span><span class="mf">0.154062</span>
</code></pre></div>

<p>The normalization also corrects for the fact that some shooters have higher FG% overall than other players.</p>
<p>Normalized values can then be compared to other players' values. The lower the entropy, the more similar their shapes are.</p>
<p>I also calculated the Jensen-Shannon distance, which is like relative entropy, but symmetrical (<code>distance(le_bron, le_other_guy) = distance(le_other_guy, le_bron)</code>).</p>
<p>The closest guys to LeBron by this measure are CJ McCollum, Terry Rozier, Andrea Bargnani, Marcus Morris, Richard Hamilton, Nikola Vucevic, Zach Randolph, Lauri Markkanen, Kawhi Leonard, and Kevin Huerter. </p>
<p>Since Richard Hamilton had the streakiest game in the last 20 years, it's not surpring to see him. But except for Randolph and Vucevic, none of the top 10 had exceptional z scores, though they were all positive.</p>
<p>The Jensen-Shannon distance results were extremely similar to entropy. It agreed exactly with the entropy as far as ordering 73 of the top 100 players. The average z score for those players was 1.16, versus 1.15 for entropy. So, in aggregate, both were better than my homegrown metric at identifying unstreaky players.</p>
<p><img alt="most-similar-last5" src="/img/most-similar-last5.png"></p>
<p>I haven't looked at whether the reason for the trend in last 5 FG% is due to shot selection for these other players, which is probably the interesting part. Some of the players flagged here are inevitably due to chance. It's based on five 50/50 measurements, so 1 in 32 players would get flagged as "LeBron like" even if the data was randomly generated.</p>
<p>None of my queries here turned up the un-streakiest players like Luka Doncic and Anthony Edwards. Whatever causes their extreme unstreakiness (beyond randomness) must be different from LeBron's tendencies. Stay tuned!</p>                    </article>
                </aside><!-- /#featured -->
                    <section id="content" class="body">
                        <h1>Other articles</h1>
                        <hr />
                        <ol id="posts-list" class="hfeed">

                <li><article class="hentry">
                    <header>
                        <h1><a href="/lebron-james-the-unstreaky-king.html" rel="bookmark"
                               title="Permalink to LeBron James, the Unstreaky King">LeBron James, the Unstreaky King</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-06-12T10:20:00-10:00">
                Published: Thu 12 June 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/sports-analytics.html">sports analytics</a>.</p>
<p>tags: <a href="/tag/basketball.html">basketball</a> <a href="/tag/the-hot-hand.html">the hot hand</a> </p>        
</footer><!-- /.post-info -->                        <p>In previous installments, I've shown that NBA players are, as a whole, less streaky than they should be. This is apparent in game-level data, and more obvious looking at multi season trends.</p>
<p>So far, I've only looked at the past few seasons of the NBA. I decided to gather as …</p>
                        <a class="readmore" href="/lebron-james-the-unstreaky-king.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="/approximate-normality-and-continuity-corrections.html" rel="bookmark"
                               title="Permalink to Approximate Normality and Continuity Corrections">Approximate Normality and Continuity Corrections</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-06-08T10:20:00-10:00">
                Published: Sun 08 June 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/statistics.html">statistics</a>.</p>
<p>tags: <a href="/tag/basketball.html">basketball</a> <a href="/tag/the-hot-hand.html">the hot hand</a> </p>        
</footer><!-- /.post-info -->                        <p>(Notebooks and other code available at: <a href="https://github.com/csdurfee/hot_hand">https://github.com/csdurfee/hot_hand</a>. As usual, there is stuff in there I'm not covering here.)</p>
<h1>What is "approximately normal"?</h1>
<p>In the last installment, I looked at NBA game-level player data, which involve very small samples.</p>
<p>Like a lot of things in statistics, the …</p>
                        <a class="readmore" href="/approximate-normality-and-continuity-corrections.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="/simulating-hot-and-lukewarm-hands.html" rel="bookmark"
                               title="Permalink to Simulating hot and lukewarm hands">Simulating hot and lukewarm hands</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-05-28T10:20:00-10:00">
                Published: Wed 28 May 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/sports-analytics.html">sports analytics</a>.</p>
<p>tags: <a href="/tag/basketball.html">basketball</a> <a href="/tag/the-hot-hand.html">the hot hand</a> </p>        
</footer><!-- /.post-info -->                        <p>(Notebooks and other code available at: <a href="https://github.com/csdurfee/hot_hand">https://github.com/csdurfee/hot_hand</a>. There's a bunch of stuff in the notebook about the Wald-Wolfowitz test that I will save for another week.)</p>
<p>In my last installment, I was looking at season long shooting records from the NBA, and I concluded that NBA …</p>
                        <a class="readmore" href="/simulating-hot-and-lukewarm-hands.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="/what-are-the-most-important-events-at-the-nfl-combine.html" rel="bookmark"
                               title="Permalink to What are the most important events at the NFL Combine?">What are the most important events at the NFL Combine?</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-05-23T10:20:00-10:00">
                Published: Fri 23 May 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/sports-analytics.html">sports analytics</a>.</p>
<p>tags: <a href="/tag/football.html">football</a> </p>        
</footer><!-- /.post-info -->                        <p>(the code used is available at <a href="https://github.com/csdurfee/nfl_combine_data/">https://github.com/csdurfee/nfl_combine_data/</a>).</p>
<h2>Intro</h2>
<p>Every year, the National Football League hosts an event called the Combine, where teams can evaluate the top prospects before the upcoming draft.</p>
<p>Athletes are put through a series of physical and mental tests over the course of …</p>
                        <a class="readmore" href="/what-are-the-most-important-events-at-the-nfl-combine.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="/majority-voting-in-ensemble-learning.html" rel="bookmark"
                               title="Permalink to Majority Voting in Ensemble Learning">Majority Voting in Ensemble Learning</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-05-22T10:20:00-10:00">
                Published: Thu 22 May 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/machine-learning.html">machine learning</a>.</p>
        
</footer><!-- /.post-info -->                        <p>(notebook is available at <a href="https://github.com/csdurfee/ensemble_learning/blob/main/ensemble_voting.ipynb">github.com/csdurfee/ensemble_learning</a>.)</p>
<h2>Ensemble Learning</h2>
<p>AI and machine learning systems are often used for classification. Is this email spam or not? Is this person a good credit risk or not? Is this a photo of a cat or not?</p>
<p>There are a lot of ways …</p>
                        <a class="readmore" href="/majority-voting-in-ensemble-learning.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="/the-hot-hand-doesnt-exist-in-the-nba-but-its-opposite-does.html" rel="bookmark"
                               title="Permalink to The hot hand doesn't exist in the NBA, but its opposite does">The hot hand doesn't exist in the NBA, but its opposite does</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-05-16T10:20:00-10:00">
                Published: Fri 16 May 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/sports-analytics.html">sports analytics</a>.</p>
<p>tags: <a href="/tag/basketball.html">basketball</a> <a href="/tag/the-hot-hand.html">the hot hand</a> </p>        
</footer><!-- /.post-info -->                        <p>(The code used, and ipython notebooks with a fuller investigation of the data is available at <a href="https://github.com/csdurfee/hot_hand">https://github.com/csdurfee/hot_hand</a>.)</p>
<h1>Streaks</h1>
<p>When I'm watching a basketball game, sometimes it seems like a certain player just can't miss. Every shot looks like it's going to go in. Other times, it …</p>
                        <a class="readmore" href="/the-hot-hand-doesnt-exist-in-the-nba-but-its-opposite-does.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="/the-hardest-road.html" rel="bookmark"
                               title="Permalink to The Hardest Road">The Hardest Road</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-05-01T10:20:00-10:00">
                Published: Thu 01 May 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/casey-durfee.html">casey durfee</a>
                </address>
        <p>In <a href="/category/sports-analytics.html">sports analytics</a>.</p>
<p>tags: <a href="/tag/basketball.html">basketball</a> </p>        
</footer><!-- /.post-info -->                        <h2>What geology can tell us about Kevin Durant's next team</h2>
<p>When NBA superstar Kevin Durant left the Oklahoma City Thunder to join the Golden State Warriors, he said that doing so was taking "the hardest road". This was met with a lot of mockery, because the Golden State Warriors had …</p>
                        <a class="readmore" href="/the-hardest-road.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>
                    </ol><!-- /#posts-list -->
                    </section><!-- /#content -->
                <section id="extras" class="body">
                                <div class="social">
                                        <h2>social</h2>
                                        <ul>
                                                        <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                                        </ul>
                                </div><!-- /.social -->
                </section><!-- /#extras -->

                <footer id="contentinfo" class="body">
                        <address id="about" class="vcard body">
                                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                        </address><!-- /#about -->

                        <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                </footer><!-- /#contentinfo -->

        </body>
</html>