<!DOCTYPE html>
<html lang="english">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mathletix | Articles by casey durfee</title>
    <link rel="shortcut icon" type="image/png" href="/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="mathletix Full Atom Feed" />
    <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/pygments.css" type="text/css" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="casey durfee" />
</head>
<body>
    <header>
        <nav style="overflow: hidden;">
            <ul>

                <li class="ephemeral selected"><a href="/author/casey-durfee.html">casey durfee</a></li>
                <li><a href="/">Home</a></li>
                <li><a href="/pages/aboutbest-of.html">About/Best Of</a></li>
            </ul>
        </nav>
        <div class="header_box" style="height: 50px">
        <h1><a href="/">
            <image src='' class="avatar" width="50px" /><span class="site_title">mathletix</span>
            </a></h1></div>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Nov 07, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/gambling-experts-pt-1.html" rel="bookmark" title="Permanent Link to &quot;Gambling experts, pt. 1&quot;">Gambling experts, pt. 1</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=8UDJSy2zyz0" target="_blank"><img alt="Charlie Musselwhite, &quot;Cristo Redentor&quot;" src="https://img.youtube.com/vi/8UDJSy2zyz0/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=8UDJSy2zyz0" target="_blank">Charlie Musselwhite, "Cristo Redentor"</a></p>
<h1>Are betting experts any good at what they do?</h1>
<p>These days, nearly all talk about gambling I see on TV and the internet is sponsored by one of the sportsbooks. How good is all this sponsored advice?</p>
<p>There are quite a few shows that are just about gambling, but more common are ad reads from Youtubers or sportscasters who are sponsored by sportsbooks, but aren't really focused on gambling. These appear on-air in the middle of a game, or an ad break in a Youtube video.</p>
<p>Picks from sports announcers do terribly, <a href="https://www.youtube.com/watch?v=LyKHR0batTE">as the Youtube channel Foolish Baseball has documented in their wonderful video, <em>Baseball is Ruining Gambling</em></a>.</p>
<p>As a numbers guy, it's baffling that anybody would follow these obviously sponsored picks at obviously juiced lines, given by obviously casual gamblers, but some people are taking them, because the sportsbooks keep paying for the ads. </p>
<p>Gambling is a social and parasocial activity now, another thing you do on your phone when you're bored that sort of feels like interacting with other humans, but isn't. </p>
<p>Some gamblers want to be on the same side of the bet as their favorite YouTuber, who give their favorite picks as a part of an ad read. The apps also allow you to follow people, and take the same bets they take. It's yet another one-way online relationship.</p>
<p>Other gamblers take bets to feel more connected to their team. Announcer parlays are invitations to take a financial interest in the game that you're already watching, not necessarily because you think the Brewers play-by-play guy is secretly a betting wizard. The baseball announcers don't seem to have much of an interest in gambling, or being touts. They're not there for <a href="https://www.youtube.com/watch?v=LyKHR0batTE">our wholesome national pastime, gambling on sports</a>, they're true sickos who are only interested the disreputable game of baseball. Putting together some half-ass parlay for the promo is part of their job. It's just another ad read. It may as well be a local roofing company or a personal injury lawyer.</p>
<p>Sportsbooks advertise because it makes them money in the long run. These companies seem pretty well-run, if nothing else. They want to sponsor people who are good at bringing in customers with a high Customer Lifetime Value -- people who will lose over and over again for years, making back the cost to acquire them as a customer many times over. That's it. That's the game. Why would they sponsor people who give good advice about gambling, or good picks?</p>
<h1>Do people care whether gambling experts are actually good or not?</h1>
<p>Some guys talk about gambling for a living. They discuss sports from the perspective of people who are gamblers first, and sports fans second. Everything's an angle, or a trend, or a bad beat. At the extreme, athletic competitions are interesting because betting on them is interesting, not because sports themselves are. These guys are both living and selling the gambling lifestyle, which I talk much more about in the book:</p>
<blockquote>
<p>A parasocial relationship with a guy selling picks or talking about gambling on a podcast causes guys to want to form social relationships around gambling. They're Gambling Guys now. Which leads to an endless parade of dudes complaining about their parlays online, and, I would wager, annoying the heck out of their significant others. "It's a whole lifestyle, Sherri! Of course I had to get my tips frosted! I'm a Gambling Guy now!"</p>
<p>It's all imaginary. An imaginary relationship with a betting guru in the form of a "hot tip". An imaginary relationship with the sporting event or player in the form of a bet. An imaginary relationship with reality itself in the form of the rationalization about why the "hot tip" didn't win. An imaginary relationship between winning and skill. </p>
<p>Being a sports fan is already ridiculous enough.</p>
</blockquote>
<h1>Poking the bear, a bit</h1>
<p><a href="https://theringer.com">The Ringer</a> is a website about sports and pop culture that has evolved into a podcasting empire. I like a lot of what they do, and I especially appreciate that they publish great writing that surely isn't profitable for the company. For the most part, I can just enjoy their non-gambling content and ignore that it's subsidized by gambling.</p>
<p>But they've done as much as anyone to normalize sports betting as a lifestyle, and deserve an examination of that. The Ringer wasn't worth a bajillion dollars before gambling legalization, back when they were doing MeUndies ad reads.</p>
<p>The Ringer has an incredible amount of content that's just Gambling Guys Talk Gambling with Other Gambling Guys, around 10 hours a week of podcasts, by my count. The Ringer's flagship show is the Bill Simmons Podcast, which usually devotes at least a couple hours a week to discussing which bets Bill and his pals think are good. (<a href="/cool-parlay-bro.html">Previously satirized in <em>Cool Parlay, Bro</em></a>)</p>
<p>The site also has an hour long <em>daily</em> podcast about gambling, <a href="https://www.theringer.com/podcasts/the-ringer-gambling-show">The Ringer Gambling Show</a>, and several other podcasts that regularly discuss betting. As far as I know, all of their sports podcasts feature gambling ad reads, even the ones with hosts that clearly find gambling distasteful.</p>
<p>Several members of the Ringer's staff are full time Gambling Guys now. They talk about their addictions for a living, which must be nice. I've been talking about my crippling data science addiction on here for months without a single job offer.</p>
<p>Are these guys good at their job, though? (Are they good at their addictions?) The Ringer is currently having a contest betting on the NFL between five different NFL podcasts, four of which primarily cover sports gambling, which they're calling <a href="https://www.theringer.com/topic/ringer-107">The Ringer 107</a>.  Here are their results through Week 9:</p>
<p><img alt="/img/not-great-bob.png" src="/img/not-great-bob.png"></p>
<p>Every single one of the five teams is losing money against the spread. They don't make it clear on the website, but some bets are at <code>-120</code> vig, so the records are even worse than they look. </p>
<p>It might be bad luck, right? I've <a href="/do-you-wanna-win.html">written at length</a> about how having a true skill level of 55% doesn't guarantee actually winning 55% of the bets. </p>
<p>Based on this data, it's extremely unlikely the gambling pros at the Ringer are just unlucky. I simulated 5 teams taking the same number of bets as the Ringer's contest so far. If every pick had a 55% chance of winning (representing picks by advantage players), then 99.5% of the time, <em>at least</em> one team does better than all five of the Ringer's did.</p>
<p>Even at a 50% winning rate, same as flipping a coin, the simulation does better than the Ringer 91% of the time. Based on this data, you'd be better off flipping a coin than listening to these gambling experts.</p>
<h1>The easiest way to know they can't do it</h1>
<p>If I talked about gambling for a living and was demonstrably good at it, I'd want everyone to see the proof. These guys almost never post their actual records over a long stretch of time, though. They will crow about their wins, and offer long-winded explanations as to why their losing picks were actually right, and reality was wrong. But it's hard to find actual win-loss records for them. </p>
<p>Last season, The Ringer's Anthony Dabbundo didn't appear to keep track of his record betting on the NFL against the spread at all (<a href="https://www.theringer.com/2025/01/02/nfl/best-bets-nfl-week-18-steelers-bengals-vikings-lions-chiefs-broncos">example article</a>).  <a href="https://www.theringer.com/2025/11/06/nfl/best-nfl-bets-week-10-odds-predictions-eagles-packers">This year</a>, he has, so we know he's gone 37-37, and 20-25 on his best bets, despite some of them being at worse than <code>-110</code> odds. His best bets have had a return of <code>-16.7%</code>, about the same as lazy MLB announcer parlays, and almost 4 times worse than taking bets by flipping a coin.</p>
<p>What odds would you give me that the Ringer goes back to not showing his record next season?</p>
<p>To be clear, I don't think Dabbundo is worse than the average gambling writer at gambling. I've never found a professional Gambling Guy that is statistically better than a coin flip. Dabbundo's job is writing/podcasting the little descriptions that go along with each of his picks. His job isn't being good at gambling, it's being good at talking about gambling. There is no evidence that he can predict the future but plenty of evidence he can crank out an hour of podcast content every weekday that enough people enjoy listening to. Predicting the future isn't really the value-add for these sorts of shows.</p>
<h1>The curse of knowledge</h1>
<p>I think it's significant that by far the worst team in the contest is the Ringer NFL Show, which is primarily not about gambling. It's a show by extreme football nerds, for extreme football nerds. Once in a while I listen to it while doing the dishes, and I'll go like 20 minutes without recognizing a single player or football term they're talking about. They are all walking football encyclopedias, as far as I'm concerned.</p>
<p>If gambling really were a matter of football-knowing, they should be winning. They aren't, because betting isn't a football-knowing contest.</p>
<p>I can see how being a true expert might make somebody worse at gambling. Every bet is a math problem, not a trivia question. A bet at a <code>-4.5</code> spread might have a positive expected value, but a <code>-5.5</code> spread have a negative expected value. People who are good at sports gambling can somehow tell the difference. Like life, sports gambling is a game of inches.</p>
<p>The folks on the Ringer NFL Show know the name of the backup Left Tackle for every team in the league, but I don't think that's really an advantage in knowing whether <code>-4.5</code> or <code>-5.5</code> is the right number for a particular game. Most of the cool football stuff they know should already be baked into the line, or is irrelevant. Sports betting is a lot more like <em>The Price Is Right</em> than it is like sports.</p>
<p>A great chef might know practically everything there is to know about food. They might know what type of cheese is the tastiest, how to cook with it, and so on. But if they went to the grocery store, that doesn't mean they would notice that they had gotten charged the wrong price for the cheese, or that they could get it 20% cheaper at another store. That's a totally different skillset and mindset.</p>
<p>People on these gambling shows spend several minutes explaining each of their picks, listing lots of seemingly good reasons. I think that having to give a good reason for each pick forces them into going with what they know, not considering that all the obvious information and most of the non-obvious information they have is already reflected in the line. Needing to be seen as an expert could lead them to pick the side with slightly less value on it, because they want to make a defensible pick. It's much better to have a good sounding reason for making a pick, and losing, than it is to have no reason for making a pick and winning.</p>
<p>In general, I think every bet has a more reasonable side and a crazier side. Anybody prognosticating for a living has a disincentive to pick the crazier side if they're going to have to explain the bet if they happen to lose. It doesn't if there was actually more value than the Browns. Losing on the Browns and then having to live with being the guy who bet on the Browns is two losses at once.</p>
<h1>The Mathletix Bajillion, week 10</h1>
<p>I figured I should take a crack at it. The season is mostly over, so it will be a small sample size, but let's see what happens. At the very least, it will force me to publish something at least once a week for the next couple of months, and if things go bad, work on developing the shamelessnesss of someone who gets paid to predict the future, even though they can't.</p>
<p>I'm going to make two sets of picks, one based on a proprietary betting model I created, the other purely random, based on rolling dice. At the end, I will reveal which team is which, and see how they do against the Ringer's teams. </p>
<p>I am an extremely casual fan of the NFL, so little to no actual ball-knowing will go into these picks. I probably know less about football than the average person who bets on football. I don't think that's really a disadvantage when the football experts are going 18-27 on the year.</p>
<p>I will take all bets at -110 odds or better. No cheeky -120 bets to goose the win-loss record a bit, like some of the teams in the Ringer competition have done. But I will also shop around between sportsbooks and take the best lines I can find, by checking sites like unabated, reduced juice sportsbooks like lowvig and pinnacle, and betting exchanges like matchbook and prophetx. </p>
<p>For the betting exchanges, I will only take spreads where there is at least $1000 in liquidity -- no sniping weird lines. Part of what I'm trying to show is that bargain shopping, which has nothing to do with football knowledge, can make a big difference. So I will shop pretty aggressively. Even if I lose, I will lose less fake money than I would at -110, which means I don't have to win as often to be profitable. I'm pretty confident I can beat the Ringer pros on that point at least.</p>
<p>Sources will be noted below.</p>
<p>Team names come from the 1995 crime drama <em>Heat</em>, starring Tom Sizemore, in accordance with the Ringer house style.</p>
<p>Picks were made Friday evening.</p>
<h3>The Neil McAul-Stars</h3>
<ul>
<li>ATL +6.5 -108 (fanduel)</li>
<li>NO +5.5 -109 (prophetx)</li>
<li>SEA -6.5 -110 (prophetx)</li>
<li>PHI +2 -109 (Rivers)</li>
<li>LAC -3 +104 (prophetx)</li>
</ul>
<h3>The Vincent Hand-eggs</h3>
<ul>
<li>DET -7.5 -105 (prophetx)</li>
<li>PIT +3 -109 (prophetx)</li>
<li>TB -2.5 -110 (fanduel)</li>
<li>CHI -4.5 -105 (fanduel)</li>
<li>CAR -5 -110 (harp rock casino)</li>
</ul>
                <div class="clear"></div>

                <div class="info">
                    <a href="/gambling-experts-pt-1.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/sports-betting.html" rel="tag">sports betting</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/football.html" class="tags">football</a>
                    &nbsp;<a href="/tag/your-parlay-sucks.html" class="tags">your parlay sucks</a>
                </div>
            </article>            <h4 class="date">Nov 05, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/nba-push-charts.html" rel="bookmark" title="Permanent Link to &quot;NBA push charts&quot;">NBA push charts</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=0Yo1DSCuSmQ" target="_blank"><img alt="Geraldo Pino, &quot;Heavy Heavy Heavy&quot;" src="https://img.youtube.com/vi/0Yo1DSCuSmQ/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=0Yo1DSCuSmQ" target="_blank">Geraldo Pino, "Heavy Heavy Heavy"</a></p>
<p>Code: <a href="https://github.com/csdurfee/scrape_yahoo_odds/">https://github.com/csdurfee/scrape_yahoo_odds/</a>. See the <code>push_charts.ipynb</code> notebook.</p>
<h1>NBA Push Charts</h1>
<p>In the past couple of posts, I've looked at NBA betting data from BetMGM. There are multiple types of bets available on every game. A <em>push chart</em> maps the fair price of a spread bet to the equivalent money line bet. How often does a team that is favored by 3 points win the game outright? It's going to be less often than a team favored by 10 points. The money line should reflect those odds of winning.</p>
<p>You can find a lot of push charts online, but they tend to be based on older NBA data. With more variance due to a lot of 3 point shots, and more posessions per game, I wouldn't expect them to still be accurate. </p>
<p>Push charts are useful for assessing which of two different wagers is the better value. Here's an example of a game where different sportsbooks have different lines for the same game:</p>
<p><img alt="/img/pushchart.png" src="/img/pushchart.png"></p>
<p>Say you want to bet on the Warriors. They have some players out tonight (Nov 5, 2025) so they're the underdogs, but they are also playing the dysfunctional Kangz, so it might be a good value bet. You could take the Warriors at either <code>+3.5 -114</code>, <code>+3 -110</code>, or <code>+2.5 -105</code>. Which bet has the highest expected value? If the Warriors lose by 3, the +3.5 bet would win, but the +3 bet would push (the bet is refunded), and the +2.5 bet would lose. A push chart can give a sense of how valuable the half points from +2.5 to +3, and +3 to +3.5, are. Is the probability of the Warriors losing by exactly 3 -- the value of getting a push -- worth going from <code>-105</code> to <code>-110</code>?</p>
<p>[edit: the Warriors, without their 3 best players, led for most of the game before eventually losing by 5 after Russell Westbrook had one of his best games in years. So the line was only off by 2 points. The lines are often uncannily close, even when a bunch of weird stuff happens. Sometimes it all kinda cancels out.]</p>
<p>I'm going to do a push chart two different ways, then combine them. For almost every game over the last 4 years, we have the money line and the spread, so we can match them up directly. These will have the vig baked in. And as we saw previously, the money line for favorites has a slightly better expected value than the average bet on the spread. So it's going to end up a little biased.</p>
<p>We can also calculate a push chart without any vig by looking at winning percentage for every spread -- what percent of the time does a +3.5 point underdog actually win the game. It will need some smoothing, since the data will be noisy.</p>
<h2>The retail NBA push chart</h2>
<p>I matched up the spread and the money line for both the home and the away team on each game, then took the median of those values. Spreads in the range of -0.5 to +0.5 are very rare, as are spreads over -13.5/+13.5, so I've omitted those.</p>
<div class="highlight"><pre><span></span><code>|spread |money line|
|------:|---------:|
| -13.5 |  -1000   |
| -12.5 |   -750   |
| -11.5 |   -650   |
| -10.5 |   -550   |
|  -9.5 |   -450   |
|  -8.5 |   -375   |
|  -7.5 |   -300   |
|  -6.5 |   -250   |
|  -5.5 |   -225   |
|  -4.5 |   -190   |
|  -3.5 |   -160   |
|  -2.5 |   -140   |
|  -1.5 |   -120   |
|   1.5 |    100   |
|   2.5 |    115   |
|   3.5 |    135   |
|   4.5 |    155   |
|   5.5 |    180   |
|   6.5 |    200   |
|   7.5 |    240   |
|   8.5 |    290   |
|   9.5 |    340   |
|  10.5 |    400   |
|  11.5 |    475   |
|  12.5 |    525   |
|  13.5 |    625   |
</code></pre></div>

<p>This gives us how BetMGM prices the value of individual points on the spread (with the vig figured in). This is sort of their official price list.</p>
<p>American style odds are symmetrical if there is no vig involved. A <code>-400</code> bet implies a 4/5 chance of winning, and a <code>+400</code> bet implies a 1/5 chance of winning. If the <code>-400</code> bet wins 4/5 of the time and loses 1/5 of the time, the gambler breaks even, and vice versa. So a no-vig money line would be <code>+400/-400</code>.</p>
<p>The odds offered by the sportsbooks are asymmetrical, because they want to make money. We see that <code>+13.5</code> on the spread maps to a <code>+625</code> money line, but <code>-13.5</code> maps to <code>-1000</code>. A +625 bet should win 100/(100+625), or about 14% of the time.  A -1000 bet should win 1000/1100, or 91% of the time. Adding those together, we get <code>91% + 14% = 105%</code>. That extra 5% is called <em>the overround</em>, and is the bookmaker's guaranteed profit, assuming they have equal wagers on both sides.</p>
<p>Here's what that data looks like as a graph, with some smoothing added.</p>
<p><img alt="/img/push-smooth.png" src="/img/push-smooth.png"></p>
<p>I think this shows the bias against heavy favorites that we saw previously. Note how the line gets much steeper moving from -10 to -20 on the spread, versus moving from +10 to +20.</p>
<p>At -20.5, this graph gives a payout of -5000, but at +20.5, it gives a payout of +1320. The fair payout is somewhere in between those two numbers. </p>
<p>If the fair payout is (-5000/+5000), then the underdog is getting way less of a payout (in essence, paying more in vig) than they should. If the fair payout is closer to (-1360/+1360), then the favorite is paying more in vig than they should.  So the asymmetricality gives a clue that sportsbooks aren't splitting the vig down the middle, but it doesn't tell us the fair price.</p>
<h2>Push charts based on win frequencies</h2>
<p>We can estimate a fair price by going through all the games and see how often a +3.5 underdog wins outright, then convert that percentage to a fair money line. The problem here is that the results will be very noisy. We'd need hundreds or thousands of games at each spread value, and we only have 4,500 or so games overall. So it's gonna be chunky. We'll have to do some smoothing on it, (foreshadowing alert: it will lead to weird results later on)</p>
<p>Here are the win ratios by spread, combining both home and away teams:</p>
<div class="highlight"><pre><span></span><code>| spread| win ratio |
|------:|----------:|
| -13.5 | 0.889764  |
| -12.5 | 0.835616  |
| -11.5 | 0.832487  |
| -10.5 | 0.789474  |
|  -9.5 | 0.747212  |
|  -8.5 | 0.762763  |
|  -7.5 | 0.745763  |
|  -6.5 | 0.701299  |
|  -5.5 | 0.643892  |
|  -4.5 | 0.6       |
|  -3.5 | 0.641682  |
|  -2.5 | 0.562393  |
|  -1.5 | 0.525535  |
|   1.5 | 0.474465  |
|   2.5 | 0.437607  |
|   3.5 | 0.358318  |
|   4.5 | 0.4       |
|   5.5 | 0.356108  |
|   6.5 | 0.298701  |
|   7.5 | 0.254237  |
|   8.5 | 0.237237  |
|   9.5 | 0.252788  |
|  10.5 | 0.210526  |
|  11.5 | 0.167513  |
|  12.5 | 0.164384  |
|  13.5 | 0.110236  |
</code></pre></div>

<p>A team with a -1.5 point spread wins 52.6% of the time, which is very close to the break-even point on standard -110 bets of 52.4%. So a gambler needs to be at least 1.5 points better than Vegas at setting the lines to expect to make money.</p>
<p>These odds have to be symmetrical. If a team favored by -4.5 wins 60% of the time, then a +4.5 point underdog has to win 40% of the time.</p>
<p>Unfortunately, this data is probably too <em>chunky</em> to give good results. <code>-4.5</code> has a lower win rate than <code>-5.5</code>, which doesn't make any sense. The more negative the spread, the higher the win rate should be. Here's what it looks like with smoothing:</p>
<p><img alt="/img/spread-smooth.png" src="/img/spread-smooth.png"></p>
<p>We can convert these winning percentages to fair (no vig) money lines:</p>
<p><img alt="/img/fair-money-lines.png" src="/img/fair-money-lines.png"></p>
<p>Converting to money lines doesn't break the symmetry. A -4.5 favorite gets a money line of -163, and a 4.5 point underdog gets a money line of +163.</p>
<p>This is just a first attempt. Different ways of smoothing the actual win rates will lead to different results.</p>
<div class="highlight"><pre><span></span><code>|spread |fair ML |
|------:|-------:|
| -13.5 |   -677 |
| -12.5 |   -565 |
| -11.5 |   -454 |
| -10.5 |   -381 |
|  -9.5 |   -338 |
|  -8.5 |   -303 |
|  -7.5 |   -269 |
|  -6.5 |   -227 |
|  -5.5 |   -188 |
|  -4.5 |   -163 |
|  -3.5 |   -144 |
|  -2.5 |   -128 |
|  -1.5 |   -116 |
|   1.5 |    116 |
|   2.5 |    128 |
|   3.5 |    144 |
|   4.5 |    163 |
|   5.5 |    188 |
|   6.5 |    227 |
|   7.5 |    269 |
|   8.5 |    303 |
|   9.5 |    338 |
|  10.5 |    381 |
|  11.5 |    454 |
|  12.5 |    565 |
|  13.5 |    677 |
</code></pre></div>

<h2>Crossing the streams, and an abrupt ending</h2>
<p>What happens if we look at the difference between the no-vig moneylines, and what the sportsbook actually charges? Will it show us the favorite-longshot bias?</p>
<p>It turns out, it doesn't. The win frequency data is too noisy. I spent a lot of time spinning my wheels on it, before realizing I didn't have enough data. I will come back to the subject, though, because failure is more educational than success.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="/nba-push-charts.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/sports-betting.html" rel="tag">sports betting</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/basketball.html" class="tags">basketball</a>
                    &nbsp;<a href="/tag/your-parlay-sucks.html" class="tags">your parlay sucks</a>
                </div>
            </article>            <h4 class="date">Oct 26, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/overs-money-lines-and-pigeonholes.html" rel="bookmark" title="Permanent Link to &quot;Overs, money lines, and pigeonholes&quot;">Overs, money lines, and pigeonholes</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=h9-rmzBhHS8" target="_blank"><img alt="Pigeonhed, &quot;Glory Bound&quot; (Dave Ruffy Remix)" src="https://img.youtube.com/vi/h9-rmzBhHS8/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=h9-rmzBhHS8" target="_blank">Pigeonhed, "Glory Bound" (Dave Ruffy Remix)</a></p>
<p>Code: <a href="https://github.com/csdurfee/scrape_yahoo_odds/">https://github.com/csdurfee/scrape_yahoo_odds/</a></p>
<h2>A little crowd wisdom</h2>
<p>Last week, we saw that for NBA spread bets, the more popular side wins 49.2% of the time. This matches <a href="/small-stakes-give-you-the-minimum-blues.html">what I've shown before</a> -- the public is generally worse than a coin flip when betting on NBA basketball.</p>
<p>This week, I have some good news. There are some types of bets on the NBA where the public do a little better than expected. Not enough to make money, but better than picking bets by flipping a coin.</p>
<h3>Money line bets and rationality</h3>
<p><a href="/lessons-from-four-years-of-nba-gambling-stats.html">Last time</a>, I looked at money line bets and showed that there is a bias against slight to heavy underdogs, and a possible bias against very heavy favorites. There's a lot I didn't get to, though. What kind of money line bets do the public prefer?</p>
<p>The public takes the home team 63% of the time, which is a little high given the home team wins 55% of games. The public also takes the money line favorite in 96% (4656/4839) of NBA games. </p>
<p>Is that rational or not? We know that favorites are a slightly better deal than underdogs on the money line, so in one sense it is. If someone offered you a free money line bet on the NBA, you should probably pick the favorite. The expected value is less bad than the underdog, so it's a better choice in the long run, and your chances of making <em>some</em> money on the bet are much higher, so it's perhaps a better choice as a single bet as well.  </p>
<p>A gambler taking half favorites and half underdogs has a chance at winning 100% of their bets, but someone taking a highly imbalanced number of favorites (or underdogs) will have a whole lot of guaranteed losses. The gambler might correctly pick every single favorite, but close to half of their bets on favorites are still going to be losses.</p>
<h3>Getting pigeonholed</h3>
<p>Money lines are all at different odds, which complicates things. For this example, let's say the gambler is taking spread bets, with both sides having a roughly equal chance of winning. There are 1230 games in the season, we'll assume the favorite is a slightly better deal, so wins 51% of the time, and the gambler takes the favorite 96% of the time.  Over 1230 games, the favorites go 627-603. The gambler takes 1181 favorites and 49 underdogs on the season.  </p>
<p>The best they can possibly do on favorites is 627/1181 (53%), assuming they somehow manage to correctly bet on every single favorite that won that season. The gambler captured all of the favorites that won, so the rest of the games left over are underdog winners, meaning they'd go a perfect 49/49 in underdog games. Overall, the best they can do is (627+49)/1230, which is 54.9%. Since the break-even point is 52.4%, most of the profits are coming from the 49 underdog games. </p>
<p>By taking so many favorites, <a href="https://en.wikipedia.org/wiki/Pigeonhole_principle">the pigeonhole principle</a> means the gambler has to be perfect just to hit a 54.9% win rate. <a href="/do-you-wanna-win.html">As I showed in <em>Do you wanna win?</em></a>, 54.9% is good enough to have a positive expected value on bets, but it's low enough that losing money over 1,230 bets is very possible, even with proper bankroll management. If hitting that number requires you to be perfect, it seems like a bad plan.</p>
<p>Here are the frequencies of odds taken by the public on the money line. There's an awkward gap in the middle. In the American way of writing odds, favorites are always -100 or smaller, and underdogs are always +100 or bigger.</p>
<p><img alt="money-line-frequencies" src="/img/money-line-frequencies.png"></p>
<p>The public mostly takes bets in the -100 to -300 range, which is in the range where money line bets have been a slightly better value than spread bets over the past four seasons, so good for them. The biggest underdog bet the public took in nearly 5,000 bets was at +400 (implying the underdog had a 20% chance of winning.)</p>
<p>The public achieved -2.87% rate of return on money line bets. That's bad compared to the 0% rate of return offered by not betting, but it's better than the -4.5% on spread bets, and way better than the -20% on some types of parlay bets. Someone <em>fading</em>, or taking the opposite bets to the public, would achieve a -6.4% rate of return.</p>
<p>On the rare occasions the public does take the underdog, they make a profit. On those 183 bets, the public notched a +2.43% rate of return.  Bets on underdogs will have a high amount of variance, so there could be some luck involved.</p>
<h3>Point totals</h3>
<p>In addition to who will win the game, gamblers can wager on how many total points will be scored. For instance, if the final score is 120-115, the point total would be 235. If the line was 230, the OVER side would have won, and the UNDER lost. </p>
<p>The point totals are pretty balanced. The over wins 50.6% (2672/5273) of the time. However, the public takes the over 88.3% (4660/4839) of the time.</p>
<p>The public did a little better than a coin flip, winning 51% of over bets, and 54.5% of the 178 under bets.</p>
<p>I was curious whether the percent of bets on one side was correlated with higher winning percentage. If 99% of the public took the over, is that a safer bet than if only 51% of the public took it? I've broken down the public's bets on the over by quartiles:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">start %</th>
<th>end %</th>
<th>num games</th>
<th>win    %</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">50</td>
<td>73.9</td>
<td>1165</td>
<td>50.5%</td>
</tr>
<tr>
<td style="text-align: left;">73.9</td>
<td>82.4</td>
<td>1164</td>
<td>51.4%</td>
</tr>
<tr>
<td style="text-align: left;">82.4</td>
<td>88.4</td>
<td>1163</td>
<td>50.9%</td>
</tr>
<tr>
<td style="text-align: left;">88.4</td>
<td>100</td>
<td>1168</td>
<td>51.5%</td>
</tr>
</tbody>
</table>
<p>For 1,000 observations, a 95% confidence interval is roughly +/- <span class="math">\(\frac{1}{\sqrt{1000}} \approx \frac{1}{\sqrt(33*30)} \approx 3\%\)</span>, which is much bigger than the difference between 50.5% and 51.5%. So the difference isn't significant.</p>
<h3>Are sportsbooks leaving money on the table?</h3>
<p>It's odd to me that the over would win more than 50% of the time when that's the side that usually has the most money on it. That's not a huge imbalance, but the sportsbooks would be making more money if they increased the point totals a bit so the over loses 51% of the time instead. </p>
<p>Gamblers betting on point totals are probably a little more savvy than ones betting the lines. It's kind of an odd thing to bet on. Doesn't matter who won, doesn't matter whether it was a good game or not. All bets are math problems, but point totals are more obviously a math problem than money lines or spreads.</p>
<h3>Do point totals tell us anything about the evolution of the NBA?</h3>
<p>It's possible sportsbooks haven't kept up with the evolution of the game. NBA point totals have gotten much higher over the past decade due to faster pace, better shooting and more 3 pointers.</p>
<p>Here is a graph of moving averages of the point totals for the past four seasons:</p>
<p><img alt="point-total-yoy" src="/img/point-total-yoy.png"></p>
<p>Point totals go down at the end of every year. That's because playoff games tend to be more tightly contested than regular season games. The vertical line is where the playoffs start.</p>
<p>There appears to be an increase in average point totals during the 2021 season, but it's stayed fairly consistent since then, with one notable exception. There's an big dip in point totals during the 2023 season, around game 800. This is almost certainly due to <a href="https://clutchpoints.com/nba/nba-stories/nba-news-adam-silver-admission-officiating">a directive from the NBA telling officials to call fewer fouls</a>. Fans (and presumably gamblers) noticed right away, but the NBA only admitted the change well after the fact. Luckily, nothing has happened since then to further undermine trust in the NBA! </p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                <div class="clear"></div>

                <div class="info">
                    <a href="/overs-money-lines-and-pigeonholes.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/sports-betting.html" rel="tag">sports betting</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/basketball.html" class="tags">basketball</a>
                    &nbsp;<a href="/tag/your-parlay-sucks.html" class="tags">your parlay sucks</a>
                </div>
            </article>            <h4 class="date">Oct 19, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/lessons-from-four-years-of-betmgm-nba-gambling-stats.html" rel="bookmark" title="Permanent Link to &quot;Lessons from four years of BetMGM NBA gambling stats&quot;">Lessons from four years of BetMGM NBA gambling stats</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=6QYbZsBPawI" target="_blank"><img alt="The Meters, &quot;People Say&quot;" src="https://img.youtube.com/vi/6QYbZsBPawI/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=6QYbZsBPawI" target="_blank">The Meters, "People Say"</a></p>
<p>In <a href="/the-public-wants-what-the-public-gets.html">a previous installment</a>, I looked at statistics about NBA gambling that I obtained from sportsbookreview.com. I thought it was pretty interesting, but there were some huge gaps in the data, and I wasn't sure what sportsbook some of it was coming from. So I didn't have a ton of confidence in my results.</p>
<p>I thought it was a pretty cool idea, though, so I tracked down a better source of data via Yahoo's NBA pages. Yahoo loads gambling data from the BetMGM sportsbook, and I found a nice internal API for getting it all. I was able to get data on the past four seasons of NBA games, and although data is missing for some games, it's much more complete, and has a bunch more info, than the original dataset.</p>
<p>All code and data is available online at <a href="https://github.com/csdurfee/scrape_yahoo_odds/">https://github.com/csdurfee/scrape_yahoo_odds/</a>. The <code>explore.ipynb</code> notebook has all the calculations and charts used in this article.</p>
<p>As usual with gambling content, I'm presenting this data because I think it is interesting to study how it works, and what it tells us about basketball and human nature. Math is cool. Basketball is cool. Human nature is frequently not cool, but always interesting. Gambling is lame.  If you have money burning a hole in your pocket, please give it to me instead of the MGM Grand.</p>
<p>OK, lecture over.</p>
<p>The data I'm looking at is every regular season and playoff NBA game from the 2021-22, 2022-23, 2023-2024 and 2024-2025 seasons. No preseason games or All-Star games, but the Emirates NBA Cup championship game is included. </p>
<p>There are 435 games that are missing stake/wager data (the percentage of money and bets placed on each side, respectively.) That leaves 4,840 NBA games that I have analyzed. The stake and wager percentages seem to be pretty similar to each other, so I'm just using the wager data.</p>
<h2>What do the spreads look like? Are there any obvious biases?</h2>
<p>The home team went 2393-2447 (49.5%) against the spread over the last 4 years. The favorite team went 2427-2413 (50.1%) against the spread in that time.</p>
<p>The home team was the favorite in 3044/4840 (62.8%) of games. The median spread is the home team -3.5 (favored by 3.5 points). Here are the frequencies:</p>
<p><img alt="home-spread-frequencies" src="/img/home-spread-frequencies.png"></p>
<p>Basketball games never end in a tie, and there are strategic reasons why NBA games rarely end in a one point difference.</p>
<p>Around half of all home lines are one of -2.5, -1.5, -4.5, -3.5, +1.5, -6.5, -5.5, -7.5 or +2.5 (in descending order of frequency).</p>
<p>98.3% of all MGM lines are on the half point (eg 8.5 instead of 8). This is so the sportsbook can avoid pushes (ties), where they have to give everybody's money back.</p>
<h2>More evidence of the folly of crowds</h2>
<p>First, some betting jargon, if you're new here. Teams that are popular with bettors are known as <em>public</em> teams. The side of a particular bet that gets more <em>action</em> is known as the <em>public side</em>. If that side of the bet won, people say <em>the public won</em>. Betting the less popular side is known as <em>fading the public</em>. When the less popular side wins against the spread, people will say <em>Vegas won</em> or <em>sharps won</em> (a <em>sharp</em> is someone who is good at betting, as opposed to a <em>square</em>, who is bad at betting.)</p>
<p>Looking at the stake/wager data, we can find out which team was more popular to bet on for each game. How do those <em>public</em> teams do collectively? Are the public any better or worse at making picks than just flipping a coin?</p>
<p>Due to well-earned cynicism, I was expecting that the public would be a bit worse than a coin flip. And they are. <em>The public</em> went 2381-2459 (49.19%) against the spread over the past 4 years.</p>
<p>The public greatly prefer betting on the away team. 2742/4840 (56.7%) of public bets are on the away team. The public also greatly prefer favorites. 2732/4840 (56.4%) of bets are on them.  </p>
<p>Here's how the bets break down:</p>
<table>
<thead>
<tr>
<th style="text-align: left;"></th>
<th style="text-align: right;">favorite</th>
<th style="text-align: right;">dog</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">AWAY</td>
<td style="text-align: right;">1215</td>
<td style="text-align: right;">1527</td>
</tr>
<tr>
<td style="text-align: left;">HOME</td>
<td style="text-align: right;">1517</td>
<td style="text-align: right;">581</td>
</tr>
</tbody>
</table>
<p>This crosstab is a little misleading. The home team is usually favored, so there are fewer home underdogs than road underdogs. However, there's still a discrepancy. The home team is the underdog 37% of the time, but only 27% of bets on underdogs are on the home team, and 28% of bets on the home team are on underdogs.</p>
<p>Of the 4 categories, the only one with a winning record for the public is away favorites -- 623-592 (51.3% win rate). The second best type is home underdogs, which went 289-292 (49.7%). </p>
<p>The two most popular bet types with the public are big losers. Away underdogs went 742-785 (48.6%), and home favorites went a putrid 727-792 (47.9%).</p>
<p>Overall, someone taking the public side of every bet over the past 4 years would have lost 324 units. If they bet $100 on every game, they would be down $32,400. Someone taking the opposite side of all these bets (<em>fading the public</em>) would "only" lose 160 units, or $16,000. </p>
<p>It would've been profitable betting <em>reduced juice</em> (risk 106 to win 100 instead of 110) to <em>fade the public</em> on all away underdog and home favorite picks. The problem with that strategy is that reduced juice sportsbooks actively attract smart players, so they have <em>sharper</em> (more accurate) lines. A retail sportsbook like BetMGM doesn't need <em>sharp</em> lines because they ban any players who win too much. Against <em>sharp</em> lines, I wouldn't expect the strategy to be profitable.</p>
<h2>How have teams done against the spread over the past 4 years?</h2>
<p>Over the past 4 seasons, team records against the spread appear fairly random. The only real outlier is the Oklahoma City Thunder, who have won an astounding 59.3% of their games against the spread. This is remarkable to me because they've been one of the best and most hyped teams in basketball the past couple years. They dominated the league last season, winning 68/82 (82.9%) games, and the NBA Championship. They're not exactly an under the radar team. Yet they appear to have been underestimated by both <em>Vegas</em> and the betting public.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"></th>
<th style="text-align: right;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Oklahoma City</td>
<td style="text-align: right;">0.593</td>
</tr>
<tr>
<td style="text-align: left;">Toronto</td>
<td style="text-align: right;">0.544</td>
</tr>
<tr>
<td style="text-align: left;">Boston</td>
<td style="text-align: right;">0.54</td>
</tr>
<tr>
<td style="text-align: left;">Memphis</td>
<td style="text-align: right;">0.529</td>
</tr>
<tr>
<td style="text-align: left;">Orlando</td>
<td style="text-align: right;">0.528</td>
</tr>
<tr>
<td style="text-align: left;">Chicago</td>
<td style="text-align: right;">0.516</td>
</tr>
<tr>
<td style="text-align: left;">Dallas</td>
<td style="text-align: right;">0.515</td>
</tr>
<tr>
<td style="text-align: left;">Cleveland</td>
<td style="text-align: right;">0.508</td>
</tr>
<tr>
<td style="text-align: left;">New York</td>
<td style="text-align: right;">0.504</td>
</tr>
<tr>
<td style="text-align: left;">Golden State</td>
<td style="text-align: right;">0.504</td>
</tr>
<tr>
<td style="text-align: left;">Indiana</td>
<td style="text-align: right;">0.503</td>
</tr>
<tr>
<td style="text-align: left;">Houston</td>
<td style="text-align: right;">0.502</td>
</tr>
<tr>
<td style="text-align: left;">LA Lakers</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr>
<td style="text-align: left;">Miami</td>
<td style="text-align: right;">0.499</td>
</tr>
<tr>
<td style="text-align: left;">Philadelphia</td>
<td style="text-align: right;">0.498</td>
</tr>
<tr>
<td style="text-align: left;">Minnesota</td>
<td style="text-align: right;">0.496</td>
</tr>
<tr>
<td style="text-align: left;">Detroit</td>
<td style="text-align: right;">0.495</td>
</tr>
<tr>
<td style="text-align: left;">Utah</td>
<td style="text-align: right;">0.492</td>
</tr>
<tr>
<td style="text-align: left;">Denver</td>
<td style="text-align: right;">0.491</td>
</tr>
<tr>
<td style="text-align: left;">Sacramento</td>
<td style="text-align: right;">0.49</td>
</tr>
<tr>
<td style="text-align: left;">LA Clippers</td>
<td style="text-align: right;">0.489</td>
</tr>
<tr>
<td style="text-align: left;">San Antonio</td>
<td style="text-align: right;">0.488</td>
</tr>
<tr>
<td style="text-align: left;">Charlotte</td>
<td style="text-align: right;">0.487</td>
</tr>
<tr>
<td style="text-align: left;">Milwaukee</td>
<td style="text-align: right;">0.484</td>
</tr>
<tr>
<td style="text-align: left;">Brooklyn</td>
<td style="text-align: right;">0.483</td>
</tr>
<tr>
<td style="text-align: left;">Portland</td>
<td style="text-align: right;">0.477</td>
</tr>
<tr>
<td style="text-align: left;">New Orleans</td>
<td style="text-align: right;">0.476</td>
</tr>
<tr>
<td style="text-align: left;">Phoenix</td>
<td style="text-align: right;">0.471</td>
</tr>
<tr>
<td style="text-align: left;">Atlanta</td>
<td style="text-align: right;">0.442</td>
</tr>
<tr>
<td style="text-align: left;">Washington</td>
<td style="text-align: right;">0.439</td>
</tr>
</tbody>
</table>
<p>While it's not impossible OKC's record against the spread is due to chance alone, a 59.3% winning percentage over 332 games seems like a failure of the market.</p>
<h2>Who are the most common favorites?</h2>
<p>Boston has been the most dominant, being favored in 319/361 (88.4%) of their games over the past four seasons, followed by Milwaukee, Denver and Golden State. </p>
<p>Detroit, Charlotte, Washington and San Antonio were the most common underdogs.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"></th>
<th style="text-align: right;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Boston</td>
<td style="text-align: right;">0.884</td>
</tr>
<tr>
<td style="text-align: left;">Milwaukee</td>
<td style="text-align: right;">0.734</td>
</tr>
<tr>
<td style="text-align: left;">Denver</td>
<td style="text-align: right;">0.711</td>
</tr>
<tr>
<td style="text-align: left;">Golden State</td>
<td style="text-align: right;">0.707</td>
</tr>
<tr>
<td style="text-align: left;">Cleveland</td>
<td style="text-align: right;">0.706</td>
</tr>
<tr>
<td style="text-align: left;">Phoenix</td>
<td style="text-align: right;">0.691</td>
</tr>
<tr>
<td style="text-align: left;">Miami</td>
<td style="text-align: right;">0.608</td>
</tr>
<tr>
<td style="text-align: left;">Minnesota</td>
<td style="text-align: right;">0.595</td>
</tr>
<tr>
<td style="text-align: left;">LA Clippers</td>
<td style="text-align: right;">0.588</td>
</tr>
<tr>
<td style="text-align: left;">New York</td>
<td style="text-align: right;">0.572</td>
</tr>
<tr>
<td style="text-align: left;">Philadelphia</td>
<td style="text-align: right;">0.568</td>
</tr>
<tr>
<td style="text-align: left;">Memphis</td>
<td style="text-align: right;">0.56</td>
</tr>
<tr>
<td style="text-align: left;">Oklahoma City</td>
<td style="text-align: right;">0.557</td>
</tr>
<tr>
<td style="text-align: left;">Dallas</td>
<td style="text-align: right;">0.542</td>
</tr>
<tr>
<td style="text-align: left;">Sacramento</td>
<td style="text-align: right;">0.535</td>
</tr>
<tr>
<td style="text-align: left;">LA Lakers</td>
<td style="text-align: right;">0.509</td>
</tr>
<tr>
<td style="text-align: left;">Atlanta</td>
<td style="text-align: right;">0.498</td>
</tr>
<tr>
<td style="text-align: left;">Indiana</td>
<td style="text-align: right;">0.456</td>
</tr>
<tr>
<td style="text-align: left;">Chicago</td>
<td style="text-align: right;">0.426</td>
</tr>
<tr>
<td style="text-align: left;">Toronto</td>
<td style="text-align: right;">0.414</td>
</tr>
<tr>
<td style="text-align: left;">Brooklyn</td>
<td style="text-align: right;">0.411</td>
</tr>
<tr>
<td style="text-align: left;">Utah</td>
<td style="text-align: right;">0.406</td>
</tr>
<tr>
<td style="text-align: left;">New Orleans</td>
<td style="text-align: right;">0.385</td>
</tr>
<tr>
<td style="text-align: left;">Orlando</td>
<td style="text-align: right;">0.358</td>
</tr>
<tr>
<td style="text-align: left;">Houston</td>
<td style="text-align: right;">0.309</td>
</tr>
<tr>
<td style="text-align: left;">Portland</td>
<td style="text-align: right;">0.245</td>
</tr>
<tr>
<td style="text-align: left;">San Antonio</td>
<td style="text-align: right;">0.215</td>
</tr>
<tr>
<td style="text-align: left;">Washington</td>
<td style="text-align: right;">0.213</td>
</tr>
<tr>
<td style="text-align: left;">Charlotte</td>
<td style="text-align: right;">0.194</td>
</tr>
<tr>
<td style="text-align: left;">Detroit</td>
<td style="text-align: right;">0.188</td>
</tr>
</tbody>
</table>
<h2>Who are the most common public teams?</h2>
<p>We saw <em>the public</em> likes to bet on the away team, and the favorite. Do they have team-specific tendencies?</p>
<p>They certainly do. The LA Lakers and Golden State Warriors are most popular, being the picked by the public in 72% of their games. Detroit and Orlando are the least popular, only getting the majority of bets in 31% of their games.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"></th>
<th style="text-align: right;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">LA Lakers</td>
<td style="text-align: right;">0.716</td>
</tr>
<tr>
<td style="text-align: left;">Golden State</td>
<td style="text-align: right;">0.716</td>
</tr>
<tr>
<td style="text-align: left;">Milwaukee</td>
<td style="text-align: right;">0.694</td>
</tr>
<tr>
<td style="text-align: left;">Phoenix</td>
<td style="text-align: right;">0.607</td>
</tr>
<tr>
<td style="text-align: left;">Denver</td>
<td style="text-align: right;">0.603</td>
</tr>
<tr>
<td style="text-align: left;">Dallas</td>
<td style="text-align: right;">0.577</td>
</tr>
<tr>
<td style="text-align: left;">Boston</td>
<td style="text-align: right;">0.557</td>
</tr>
<tr>
<td style="text-align: left;">Memphis</td>
<td style="text-align: right;">0.551</td>
</tr>
<tr>
<td style="text-align: left;">Chicago</td>
<td style="text-align: right;">0.545</td>
</tr>
<tr>
<td style="text-align: left;">Indiana</td>
<td style="text-align: right;">0.541</td>
</tr>
<tr>
<td style="text-align: left;">Philadelphia</td>
<td style="text-align: right;">0.538</td>
</tr>
<tr>
<td style="text-align: left;">Cleveland</td>
<td style="text-align: right;">0.52</td>
</tr>
<tr>
<td style="text-align: left;">Miami</td>
<td style="text-align: right;">0.519</td>
</tr>
<tr>
<td style="text-align: left;">Utah</td>
<td style="text-align: right;">0.518</td>
</tr>
<tr>
<td style="text-align: left;">Oklahoma City</td>
<td style="text-align: right;">0.518</td>
</tr>
<tr>
<td style="text-align: left;">Minnesota</td>
<td style="text-align: right;">0.504</td>
</tr>
<tr>
<td style="text-align: left;">LA Clippers</td>
<td style="text-align: right;">0.502</td>
</tr>
<tr>
<td style="text-align: left;">Brooklyn</td>
<td style="text-align: right;">0.497</td>
</tr>
<tr>
<td style="text-align: left;">Atlanta</td>
<td style="text-align: right;">0.495</td>
</tr>
<tr>
<td style="text-align: left;">New York</td>
<td style="text-align: right;">0.484</td>
</tr>
<tr>
<td style="text-align: left;">San Antonio</td>
<td style="text-align: right;">0.436</td>
</tr>
<tr>
<td style="text-align: left;">Washington</td>
<td style="text-align: right;">0.425</td>
</tr>
<tr>
<td style="text-align: left;">Sacramento</td>
<td style="text-align: right;">0.417</td>
</tr>
<tr>
<td style="text-align: left;">Houston</td>
<td style="text-align: right;">0.401</td>
</tr>
<tr>
<td style="text-align: left;">Toronto</td>
<td style="text-align: right;">0.382</td>
</tr>
<tr>
<td style="text-align: left;">Charlotte</td>
<td style="text-align: right;">0.359</td>
</tr>
<tr>
<td style="text-align: left;">Portland</td>
<td style="text-align: right;">0.341</td>
</tr>
<tr>
<td style="text-align: left;">New Orleans</td>
<td style="text-align: right;">0.322</td>
</tr>
<tr>
<td style="text-align: left;">Detroit</td>
<td style="text-align: right;">0.314</td>
</tr>
<tr>
<td style="text-align: left;">Orlando</td>
<td style="text-align: right;">0.311</td>
</tr>
</tbody>
</table>
<p>This is a very similar ranking to what I saw in the previous data -- the public don't appear to be picking bets for purely rational reasons. They like to bet on popular teams, good teams, and teams with popular players. They don't like to bet on unpopular or bad teams, even though both sides have the same chance of winning against the spread. It makes sense as an aesthetic choice, but not as a mathematical choice.</p>
<p>There is a bit of correlation (r = .08) between team popularity and their record against the spread. Bettors do slightly prefer to bet on teams that do well against the spread:</p>
<p><img alt="popularity-vs-spread" src="/img/popularity-vs-spread.png"></p>
<p>Oklahoma City is that lonely dot far off to the right, far better than every other team but only slightly more popular than average.</p>
<h2>Money lines and the favorite/longshot bias</h2>
<p>So far I've only been looking at bets against the spread. This new dataset also includes info on money line bets.</p>
<p>In some ways, money line bets are easier to understand -- just bet on the team you think will win. If you like the favorite, you will win less than you risk; if you like the underdog you win more than you risk. If it's say Oklahoma City versus Dallas, the two sides might be OKC -320 (risk $320 to win $100, implying about a 75% chance of winning) and DAL +260 (risk $100 to win $260).</p>
<p>With spread bets, both sides have an equal chance of winning, and are usually priced the same. But with money lines, the gambler doesn't know the true odds, so they don't know the vig they're paying. </p>
<p>There is data to suggest that underdogs pay more in vig, and are therefore more profitable for the sportsbook. This is called the <a href="https://www.football-data.co.uk/blog/favourite_longshot_bias_revisited.php">favorite-longshot bias</a> -- conventional betting wisdom is the expected value of taking an underdog money line bet (especially a big underdog) is lower than taking the favorite. People who bet the underdog are in essence paying a premium to have a more thrilling outcome if they do win.</p>
<p>While it's a documented phenomenon in <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3271248">horse racing</a>, there's <a href="https://www.pinnacle.com/betting-resources/en/betting-strategy/why-the-favourite-longshot-bias-is-not-a-bias/qjb2prcq4q96nftd">some debate as to whether it exists</a> in general, so I analyzed the 4,634 games with money line betting data. </p>
<p>If somebody always bet the favorite on every NBA game, or the underdog, what would be their rate of return?  Is it better or worse than the -4.5% rate on spread bets?</p>
<p>I did find evidence of the favorite-longshot bias in the NBA money lines. When risking a constant amount of money on each bet, underdogs had a rate of return of -5.47% versus -4.09% for favorites.  Favorites between -200 and -400 offer the best rate of return of any type of money line bet, at -2.97%. Every single type of underdog bet does worse than -4.5% of the typical spread bet.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">label</th>
<th>start</th>
<th>end</th>
<th>num games</th>
<th>return %</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">all faves</td>
<td>-9999</td>
<td>-1</td>
<td>4839</td>
<td>-4.09%</td>
</tr>
<tr>
<td style="text-align: left;">mild faves</td>
<td>-200</td>
<td>-1</td>
<td>2174</td>
<td>-4.19%</td>
</tr>
<tr>
<td style="text-align: left;">heavy faves</td>
<td>-400</td>
<td>-200</td>
<td>1612</td>
<td>-2.97%</td>
</tr>
<tr>
<td style="text-align: left;">huge faves</td>
<td>-9999</td>
<td>-400</td>
<td>1053</td>
<td>-5.59%</td>
</tr>
<tr>
<td style="text-align: left;">all dogs</td>
<td>1</td>
<td>9999</td>
<td>4634</td>
<td>-5.47%</td>
</tr>
<tr>
<td style="text-align: left;">mild dogs</td>
<td>1</td>
<td>200</td>
<td>2440</td>
<td>-5.60%</td>
</tr>
<tr>
<td style="text-align: left;">heavy dogs</td>
<td>200</td>
<td>400</td>
<td>1430</td>
<td>-5.69%</td>
</tr>
<tr>
<td style="text-align: left;">huge dogs</td>
<td>400</td>
<td>9999</td>
<td>764</td>
<td>-4.65%</td>
</tr>
</tbody>
</table>
<p>The number of dogs and favorites aren't equal because some games have money lines where both sides are negative, say -110, like a traditional bet with a spread of zero. There's also a big asymmetry when the odds are long. For instance the favorite might be -800 and the underdog is +561. That doesn't represent a huge vig, it's just a quirk of how American-style odds work (covered in the book).</p>
<h3>Caveats and bootstraps</h3>
<p>The table above isn't telling the whole story. I'm not conveying a sense of the volatility in the rate of return. Huge underdogs have a bigger payout when they do win, so the outcomes are going to be a lot more variable than betting the favorites.</p>
<p>-4.65% is the best estimate of the rate of return for huge underdogs, but maybe we just got lucky, or unlucky. A couple of longshot bets winning or losing could drastically change the overall return rate.</p>
<p>To test volatility, I used bootstrapping, <a href="/one-in-e.html">previously covered in <em>one in e</em></a>. I repeatedly randomly sampled 80% (611/764) of the huge underdog bets and calculated the rate of return on that set. Looking at the range of outcomes helps illustrate the variability of these bets.</p>
<p>Doing that 100 times leads to a pretty wide spread of rates of return:</p>
<p><img alt="huge-dog-bootstrap" src="/img/huge-dog-bootstrap.png"></p>
<p>Although the mean value is close to the overall mean, 15% of bootstrapped samples actually had a positive rate of return.  This is similar to what we saw in <a href="/cool-parlay-bro.html"><em>cool parlay, bro</em></a>, where due to variance, even gamblers with no advantage over the house had a small chance of making money over a long period of time off of parlays. I described that situation "like a lottery where you have a 12% chance of winning $3,617, but an 88% chance of losing $10,221." This is a similar proposition.</p>
<h3>Bridgejumper parlays and p-hacking</h3>
<p>We'd need a lot more data to get a crisp estimate of the rate of return on huge underdogs, but we can have more confidence in the estimated -5.59% rate for huge favorites. Huge favorites being disadvantaged kind of contradicts the favorite-longshot bias theory, but it doesn't surprise me at all due to a strange phenomenon I've seen over and over again online.</p>
<p>It's a type of bet <em>sharps</em> might call "<a href="https://equinedge.com/glossary/exotic-betting/bridgejumper">bridgejumper</a> parlays" and <em>squares</em> on the internet unironically call "free money parlays" -- a parlay of a whole bunch of heavy favorite money lines together. </p>
<p>The gambler starts with some heavy favorite they like and keep adding more heavy favorites to the parlay till they get <em>plus odds</em> (they can win more than they risk), ending up with 5-6 heavy favorites on the same parlay. They will pick legs of the parlay from different sports, if necessary. There usually aren't enough heavy favorites in the NBA on a particular night to get to the magic &gt; +100 payout.</p>
<p>An example you might see posted on reddit or twitter would be a 6 leg parlay with a payout of +105 like:</p>
<ul>
<li>Celtics -600</li>
<li>Nuggets -900</li>
<li>OKC -1000</li>
<li>Lakers -600</li>
<li>Duke -600</li>
<li>Some UFC Guy, because they needed a sixth bet -700</li>
</ul>
<p>I've talked to a couple people who take bridgejumper parlays, and they genuinely seem to think they've found some kind of glitch in the matrix -- all of the legs of the bet have a high chance of winning, therefore the bet is a sure thing. </p>
<p>A sensible person would know that sportsbooks aren't in the business of offering free money so maybe they're missing something. A humble person would assume they probably hadn't discovered some clever trick the sportsbooks don't know about. But most people who get into betting aren't sensible or humble (they think they can see the future, after all), so for a certain class of bettor, this type of wager just <em>feels</em> like a sure thing. </p>
<p>In parlay form, the fallacy seems obvious to me. Just because the individual risk on each leg of the parlay is small, that doesn't mean the combined risk is.</p>
<p>There's a more sophisticated version of this fallacy in statistics called p-hacking. As always, <a href="https://xkcd.com/882/">there's an xkcd about it</a>. A particular experiment might have a 5% chance of giving a false result. 5% is a pretty small number. But if you do 13 of those experiments, there's about a 50% chance that at least one of them will give a false result. Even people who are good at math and science probably don't have a good sense of what <span class="math">\(.95^{13}\)</span> equals. It's sort of like a 13 leg parlay of money line bets at -1900.</p>
<p>Next time: more on point totals, money lines, and human nature.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                <div class="clear"></div>

                <div class="info">
                    <a href="/lessons-from-four-years-of-betmgm-nba-gambling-stats.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/sports-betting.html" rel="tag">sports betting</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/basketball.html" class="tags">basketball</a>
                    &nbsp;<a href="/tag/your-parlay-sucks.html" class="tags">your parlay sucks</a>
                </div>
            </article>            <h4 class="date">Sep 23, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/primes-and-self-similarity.html" rel="bookmark" title="Permanent Link to &quot;Primes and self-similarity&quot;">Primes and self-similarity</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=ncmIlVdL8po" target="_blank"><img alt="John Hollenbeck &amp; NDR Big Band, &quot;Entitlement&quot;" src="https://img.youtube.com/vi/ncmIlVdL8po/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=ncmIlVdL8po" target="_blank">John Hollenbeck &amp; NDR Big Band, "Entitlement"</a></p>
<p>I've been messing around with prime numbers, because there are several places where they intersect with both <a href="/do-you-wanna-win.html">random walks</a> and the <a href="/riding-the-waves.html">arcsine distribution</a>.  It's going to take a while to finally tie that bow, though.</p>
<p>So it's a quick one this week: a kinda-cool story, and a kinda-cool graph.</p>
<h3>Random Primes</h3>
<p>The prime numbers are simple to find, but not easy. They're not randomly distributed, but it's hard to come up with easy ways to find them, and they act like random numbers in certain ways.  Why is 47 prime and 57 non-prime? You can't really tell just by looking.</p>
<p>To find the primes, we can write down every number from, say, 1 to 1000. Then we cross out 2, and every number divisible by 2 (4, 6, 8, etc.). Repeat that with 3 (6, 9, 12, etc.), and so on. The numbers left behind are prime. This is the famous <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> -- it's a tedious way to find prime numbers, but it's by far the easiest to understand.</p>
<p>The sieve gave mathematician David Hawkins an idea [1]: what about doing that same process, but randomly?  For each number, flip a coin, if it comes up heads, cross the number out. That will eliminate half of the numbers on the first pass. Take the lowest number <code>k</code> that remains and eliminate each of the remaining numbers with probability <code>1/k</code>. Say it's 4. For each remaining number, we flip a 4 sided die and if it comes up 4, we cross it out. </p>
<p>If we go through all the numbers, what's left over won't look like real prime numbers -- there should be as many even fake primes as odd ones, for starters. But the remaining numbers will be as sparse as the actual prime numbers. As the sample size N heads to infinity, the chances of a random number being a real prime, and being a fake prime, are the same -- <code>1/log(N)</code>.</p>
<p>This is a brilliant way to figure out what we know about prime numbers are due to their density, and what are due to other, seemingly more magical (but still non-random) factors. </p>
<p>Several characteristics of real primes apply to the random primes. And tantalizingly, things that can't be proven about real primes can be proven about the fake ones. It's been conjectured that there are infinitely many pairs of twin primes -- primes that are separated by 2 numbers. An example would be 5 and 7, or 11 and 13. It makes sense for a lot of reasons that there should be an infinite number of twin primes.  But mathematicians have been trying to prove it for over 150 years, without success.</p>
<p>Random primes can be odd or even, so the analogy to twin primes would be two random primes that are only one apart, say 5 and 6. It's relatively simple to prove that there are an infinite number of random twin primes [2]. That could easily be fool's gold -- treating the primes like they're randomly distributed gives mathematicians a whole toolbox of statistical techniques to use on them, but they're not random, or arbitrary. They're perfectly logical, and yet still inscrutible, hidden in plain sight.</p>
<h3>Largest prime factors of composite numbers</h3>
<p>I was intrigued by the largest prime factor of composite (non-prime) numbers. Are there any patterns?</p>
<p>As background, every number can be split into a unique set of prime factors. For instance, the number 24 can be factored into <code>24 = 8 * 3 = 2 * 2 * 2 * 3</code>. Let's say we knock off the biggest prime factor. We get: <code>2 * 2 * 2 = 8</code>. The raw numbers rapidly get too big, so I looked at the log of the ratio:</p>
<p><img alt="/img/logratios100k.png" src="/img/logratios100k.png"></p>
<p>The red curve is the distribution of the first 100,000 composite numbers, the orange is the next 100,000 composite numbers, and so on. </p>
<p>What if we bump up an order of magnitude? This time, the red curve is the first million composite numbers, the orange is the next million, and so on. Here's what that looks like:</p>
<p><img alt="/img/logratios1M.png" src="/img/logratios1M.png"></p>
<p>Pretty much the same graph, right? The X axis is different, but the shapes are very similar to the first one. </p>
<p>Let's go another order of magnitude up. The first 10,000,000 versus the next 10,000,000, and so on?</p>
<p><img alt="/img/logratios10M.png" src="/img/logratios10M.png"></p>
<p>We get the same basic shapes again! The self-similarity is kinda cool. Is it possible to come up with some function for the distribution for this quantity? You tell me.</p>
<h3>The perils of interpolation</h3>
<p>These graphs are flawed. I'm generating these graphs using Kernel Density Estimation, a technique for visualizing the density of data. Histograms, another common way, can be misleading. The choice of bin size can radically alter what the histogram looks like.</p>
<p>But KDE can also be misleading. These graphs make it look like the curve starts at zero.  That's not true. The minimum possible value happens when a number is of the form <code>2*p</code>, where p is a prime -- the value will be <code>log(2)</code>, about .693.</p>
<p>This data is actually way <em>chunkier</em> than KDE is treating it.  Every point of data is the log of a whole number. So there aren't that many unique values. For instance, between 0 and 1 on the X axis, there's only one possible value -- <code>log(2)</code>. Between 1 and 3, there are only 18 possible values, <code>log(2)</code> thru <code>log(19)</code> -- those being the only integers with a <code>log</code> less than 3 and greater than 1.</p>
<p>This makes it hard to visualize the data accurately. There are too many possible values to display each one individually, but not enough for KDE's smoothing to be appropriate.</p>
<p>The <em>kernel</em> in Kernel Density Estimation is the algorithm used to smooth the data --  it's basically a moving average that assumes something about the distribution of the data. People usually use the Gaussian kernel, which treats the data like a normal distribution -- smooth and bell curvy. A better choice for chunky data is the <em>tophat</em> kernel, which treats the space between points like a uniform distribution -- in other words, a flat line. If the sparseness of the data on the X axis were due to a small sample size, the tophat kernel would display plateaus that aren't in the real data. But here, I calculated data for the first 100 Million numbers, so there's no lack of data. The sparseness of the data is by construction. <code>log(2)</code> will be the only value between 0 and 1, no matter how many numbers we go up to. So the left side of the graph <em>should</em> look fairly chunky.</p>
<p>The tophat kernel does a much better job of conveying the non-smoothness of the distribution:</p>
<p><img alt="/img/tophat.png" src="/img/tophat.png"></p>
<h3>References</h3>
<p>[1] https://chance.dartmouth.edu/chance_news/recent_news/chance_primes_chapter2.html</p>
<p>[2] for sufficiently large values of <em>simple</em></p>
<p>[3] https://scikit-learn.org/stable/auto_examples/neighbors/plot_kde_1d.html</p>
<p>[4] https://en.wikipedia.org/wiki/Kernel_density_estimation</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="/primes-and-self-similarity.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/math.html" rel="tag">math</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/number-theory.html" class="tags">number theory</a>
                    &nbsp;<a href="/tag/machine-learning.html" class="tags">machine learning</a>
                    &nbsp;<a href="/tag/some-educational-value.html" class="tags">some educational value</a>
                </div>
            </article>            <h4 class="date">Sep 10, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/one-in-e.html" rel="bookmark" title="Permanent Link to &quot;One in e&quot;">One in e</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=16At3u6Nz0Y" target="_blank"><img alt="Klonhertz, &quot;Three Girl Rhumba&quot;" src="https://img.youtube.com/vi/16At3u6Nz0Y/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=16At3u6Nz0Y" target="_blank">Klonhertz, "Three Girl Rhumba"</a></p>
<p>Notebook available <a href="https://github.com/csdurfee/csdurfee.github.io/blob/main/notebooks/632%20selection.ipynb">here</a></p>
<h3>Think of a number</h3>
<p>Pick a number between 1-100.</p>
<p>Say I write down the numbers from 1-100 on pieces of paper and put them in a big bag, and randomly select from them. After every selection, I put the paper back in the bag, so the same number can get picked more than once.  If I do that 100 times, what is the chance of your number being chosen?</p>
<p>The math isn't too tricky. It's often easier to calculate the chances of a thing not happening, then subtract that from 1, to get the chances of the thing happening. There's a 99/100 chance your number doesn't get picked each time. So the probability of never getting selected is <span class="math">\((99/100)^{100} = .366\)</span>. Subtract that from one, and there's a 63.4% chance your number will be chosen. Alternately, we'd expect to get 634 unique numbers in 1000 selections.</p>
<p>When I start picking numbers, there's a low chance of getting a duplicate, but that increases as I go along. On my second pick, there's only a 1/100 chance of getting a duplicate. But if I'm near the end and have gotten 60 uniques so far, there's a 60/100 chance.</p>
<p>It's kind of a self-correcting process. Every time I pick a unique number, it increases the odds of getting a duplicate on the next pick. Each pick is independent, but the likelihood of getting a duplicate is not.</p>
<p>I could choose the numbers by flipping a biased coin that comes up heads 63.4% of the time for each one instead. I will get the same number of values on average, and they will be randomly chosen, but the count of values will be much more variable:</p>
<p><img alt="/img/distinct-binomial.png" src="/img/distinct-binomial.png"></p>
<p>Of course, if the goal is to select exactly 63 items out of 100, the best way would be to randomly select 63 without replacement so there is no variation in the number of items selected.</p>
<h3>A number's a number</h3>
<p>Instead of selecting 100 times from 100 numbers, what if we selected a bajillion times from a bajillion numbers? To put it in math terms, what is <span class="math">\(\lim\limits_{n\to\infty} (\frac{n-1}{n})^{n}\)</span> ?</p>
<p>It turns out this is equal to <span class="math">\(\frac{1}{e}\)</span> ! Yeah, e! Your old buddy from calculus class. You know, the <span class="math">\(e^{i\pi}\)</span> guy?</p>
<p>As n goes to infinity, the probability of a number being selected is <span class="math">\(1-\frac{1}{e} = .632\)</span>. This leads to a technique called bootstrapping, or ".632 selection" in machine learning (back to that in a minute).</p>
<h3>Don't think of an answer</h3>
<p>What are the chances that a number gets selected exactly once? Turns out, it's <span class="math">\(\frac{1}{e}\)</span>, same as the chances of not getting selected! This was surprising enough to me to bother to work out the proof, given at the end.</p>
<p>That means the chances of a number getting selected more than once is <span class="math">\(1 - \frac{2}{e}\)</span>. </p>
<p>The breakdown:</p>
<ul>
<li>1/e (36.8%) of numbers don't get selected</li>
<li>1/e (36.8%) get selected exactly once</li>
<li>1-2/e (26.4%) get selected 2+ times</li>
</ul>
<p>As before, the variance in number of items picked 2+ times is much lower than flipping a coin that comes up heads 26.4% of the time:</p>
<p><img alt="/img/more-than-once.png" src="/img/more-than-once.png"></p>
<h3>Derangements</h3>
<p>Say I'm handing out coats randomly after a party. What are the chances that nobody gets their own coat back? </p>
<p>This is called a derangement, and the probability is also 1/e. An almost correct way to think about this is the chance of each person not getting their own coat (or each coat not getting their own person, depending on your perspective) is <span class="math">\(\frac{(x-1)}{x}\)</span> and there are <span class="math">\(x\)</span> coats, so the chances of a derangement are <span class="math">\(\frac{x-1}{x}^{x}\)</span>.</p>
<p>This is wrong because each round isn't independent. In the first case, we were doing selection with replacement, so a number being picked one round doesn't affect its probability of being picked next round.  That's not the case here. Say we've got the numbers 1 thru 4. To make a derangement, the first selection can be 2, 3 or 4. The second selection can be 1, 3 or 4. But 3 or 4 might have been picked in the first selection and can't be chosen again. 2/3rds of the time, there will only be two options for the second selection, not three.</p>
<p>The <a href="https://en.wikipedia.org/wiki/Rencontres_numbers">long way 'round the mountain</a> involves introducing a new mathematical function called the subfactorial, denoted as <span class="math">\(!x\)</span>, which is equal to the integer closest to <span class="math">\(\frac{x!}{e}\)</span>. <span class="math">\(e\)</span> gets in there because in the course of counting the number of possible derangements, a series is produced that converges to <span class="math">\(1/e\)</span>.</p>
<p>The number of derangements for a set of size x is <span class="math">\(!x\)</span> and the number of permutations is <span class="math">\(x!\)</span>, so the probability of a derangement as x gets big is <span class="math">\(\frac{!x}{x!} = \frac{1}{e}\)</span></p>
<p>What about the chances of only one person getting their coat back? It's also <span class="math">\(\frac{1}{e}\)</span>, just like the chances of a number getting selected exactly once when drawing numbers with replacement.  The number of fixed points -- number of people who get their own coat back -- follows a Poisson distribution with mean 1.</p>
<p>The second process seems very different from the first one. It is selection with replacement versus without replacement. But <span class="math">\(e\)</span> is sort of the horizon line of mathematics -- a lot of things tend towards it (or its inverse) in the distance.</p>
<h3>Bootstrapping</h3>
<p>Say we're working on a typical statistics/machine learning problem. We're given some training data where we already know the right answer, and we're trying to predict for future results. There are a ton of ways we could build a model. Which model will do the best on the unknown data, and how variable might the accuracy be? </p>
<p>Bootstrapping is a way to answer those questions. A good way to estimate how accurate a model will be in the future is to train it over and over with different random subsets of the training data, and see how accurate the model is on the data that was held out. That will give a range of accuracy scores which can be used to estimate how well the model will be on new inputs, where we don't know the answers ahead of time. If the model we're building has a small set of parameters we're fitting (like the coefficients in a linear regression), we can also estimate a range of plausible values for those parameters. If that range is really wide, it indicates a certain parameter isn't that important to the model, because it doesn't matter if it's big or small.</p>
<p>Bootstrapping is a way of answering those questions, using the process described before -- if we have x datapoints, pick x numbers without replacement x times. The ones that get selected at least once are used to train the models, and the ones that don't get selected are used to generate an estimate of accuracy on unseen data. We can do that over and over again and get different splits every time. </p>
<p>It's a fine way to split up the training data and the validation data to generate a range of plausible accuracy scores, but I couldn't find a good reason other than tradition for doing it that way. The 63.2/36.8 split isn't some magical value. Instead of having the numbers that weren't picked be the holdout group, we could instead leave out the numbers that were only picked once (also 1/e of the numbers), and train on the ones not selected or selected more than once. But picking 63% of values (or some other percentage) without replacement is the best way to do it, in my opinion. </p>
<p>The <a href="https://sites.stat.washington.edu/courses/stat527/s14/readings/ann_stat1979.pdf">original paper</a> doesn't give any statistical insight into why the choice was made, but a remark at the end says, "it is remarkably easy to implement on the computer", and notes the $4 cost of running the experiments on Stanford's <a href="https://www.ibm.com/history/system-370">IBM 370/168 mainframe</a>. Maybe it's just the engineer in me, but it seems like a goofy way to do things, unless you actually want a variable number of items selected each run.</p>
<p>In the notebook, I showed that bootstrapping is about 40% slower than selection without replacement when using numpy's <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.choice.html">choice()</a> function. However, the cost of selecting which items to use for training vs. testing should be insignificant compared to the cost of actually training the models using that train/test split.</p>
<h3>A chance encounter</h3>
<p>A quick proof of the chances of being selected exactly once.</p>
<p>Doing x selections with replacement, the chance of a number being chosen as the very first selection (and no other times) is 
<span class="math">\(\frac{1}{x} * \frac{x-1}{x}^{x-1}\)</span></p>
<p>There are x possible positions for a number to be selected exactly once. Multiply the above by x, which cancels out 1/x. So the chances of a number being selected exactly once at any position is <span class="math">\((\frac{x-1}{x})^{x-1}\)</span>.</p>
<p>Let's try to find a number <span class="math">\(q\)</span> so that <span class="math">\(\lim\limits_{x\to\infty} (\frac{x-1}{x})^{x-1} = e^{q}\)</span>.</p>
<p>Taking the log of both sides:<br>
<span class="math">\(q = \lim\limits_{x\to\infty} (x-1) * log(\frac{x-1}{x}) = \lim\limits_{x\to\infty} \frac{log(\frac{x-1}{x})}{1/(x-1)}\)</span></p>
<p>Let 
<span class="math">\(f(x) = log(\frac{x-1}{x})\)</span>
and 
<span class="math">\(g(x) = \frac{1}{x-1}\)</span></p>
<p>By L'Hopital's rule, <span class="math">\(\lim\limits_{x\to\infty} \frac{f(x)}{g(x)} = \lim\limits_{x\to\infty}\frac{f'(x)}{g'(x)}\)</span></p>
<p>The derivative of a log of a function is the derivative of the function divided by the function itself, so:</p>
<p><span class="math">\(f'(x) = \frac{d}{dx} log(\frac{x-1}{x}) = \frac{d}{dx} log(1 - \frac{1}{x}) = \frac{\frac{d}{dx}(1-\frac{1}{x})}{1-\frac{1}{x}} =\frac{\frac{1}{x^{2}}}{{1-\frac{1}{x}}} = \frac{1}{x^{2}-x} = \frac{1}{x(x-1)}\)</span></p>
<p>and</p>
<p><span class="math">\(g'(x) = \frac{-1}{(x-1)^{2}}\)</span></p>
<p>Canceling out (x-1) from both, <span class="math">\(\frac{f'(x)}{g'(x)} = \frac{1}{x}  * \frac{x-1}{-1} = -1 * \frac{x-1}{x}\)</span>.</p>
<p>So <span class="math">\(q = \lim\limits_{x\to\infty} -1 * \frac{x-1}{x} = -1\)</span></p>
<p>At the limit, the probability of being selected exactly once is <span class="math">\(e^{-1} = \frac{1}{e}\)</span></p>
<h3>References/Further Reading</h3>
<p><a href="https://oeis.org/A068985">https://oeis.org/A068985</a></p>
<p><a href="https://mathworld.wolfram.com/Derangement.html">https://mathworld.wolfram.com/Derangement.html</a></p>
<p>Great explanation of how to calculate derangements using the inclusion-exclusion principle: <a href="https://www.themathdoctors.org/derangements-how-often-is-everything-wrong/">https://www.themathdoctors.org/derangements-how-often-is-everything-wrong/</a></p>
<p>The bible of machine learning introduces bootstrapping, but no talk of why that selection process. <a href="https://trevorhastie.github.io/ISLR/ISLR%20Seventh%20Printing.pdf">https://trevorhastie.github.io/ISLR/ISLR%20Seventh%20Printing.pdf</a></p>
<p>The original bootstrap paper: <a href="https://sites.stat.washington.edu/courses/stat527/s14/readings/ann_stat1979.pdf">https://sites.stat.washington.edu/courses/stat527/s14/readings/ann_stat1979.pdf</a></p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                <div class="clear"></div>

                <div class="info">
                    <a href="/one-in-e.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/statistics.html" rel="tag">statistics</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/machine-learning.html" class="tags">machine learning</a>
                    &nbsp;<a href="/tag/some-educational-value.html" class="tags">some educational value</a>
                </div>
            </article>            <h4 class="date">Aug 08, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/do-you-wanna-win.html" rel="bookmark" title="Permanent Link to &quot;Do you wanna win?&quot;">Do you wanna win?</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=5ZXonXfHP2U" target="_blank"><img alt="The Impressions, &quot;Do You Wanna Win?&quot;" src="https://img.youtube.com/vi/5ZXonXfHP2U/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=5ZXonXfHP2U" target="_blank">The Impressions, "Do You Wanna Win?"</a></p>
<p>(This is an excerpt from a larger project about sports gambling. Code used, and early drafts of some of the chapters can be found at <a href="https://github.com/csdurfee/book">https://github.com/csdurfee/book</a>.)</p>
<p>I'm going to return to the subject of sports betting this week. Let's start with something easy. How do you avoid going broke betting on sports? That's easy. Reduce your bet size to zero. Scared money don't lose none.</p>
<p>As long as there is randomness, there will be outliers and unexpected results. It is impossible to escape randomness in sports betting. Any time you decide to bet, you enter the kingdom of randomness and have to abide by its laws. It doesn't matter whether you have an advantage over the house (unless the advantage is truly massive). Nothing is guaranteed.</p>
<p>This is a pretty hard thing for us to know how to deal with, when our brains are pattern-finding machines. Our brains will find patterns to give us a sense of control.</p>
<h3>Notes</h3>
<p>I talk about "win rate" a bunch below. That means the percent of the time a gambler can win bets at even odds (such as a standard spread bet on the NBA or NFL.)</p>
<p>The random walks shown below are a little different from a standard one, because I'm simulating the vig. The walker goes 1 block north when the coin comes up heads (or they win the bet), and 1.1 blocks south when the coin comes up tails (or they lose the bet.)</p>
<h2>In the marches of madness</h2>
<p>The NCAA holds the March Madness tournament every year to determine who the best college basketball team is. It's a single elimination tournament of 64 teams, arranged into a big bracket.</p>
<p>Say we do a March Madness style bracket with coin flippers instead of basketball teams. We randomly assign them places in the bracket. For each matchup, the coin flipper at the top of the matchup flips a coin. If they get heads, they survive and advance. If they get tails, they lose.</p>
<p>Somebody's going to go 6-0 and win that tournament.</p>
<p>Now imagine we expanded that to every single person on the planet. Every single person gets matched up into a 64 person bracket, then each of those winners get added to another 64 team bracket, and so on. </p>
<p>Eventually, someone has to emerge the victor with a 32-0 record or something -- the greatest coin flipper in the world. Right?</p>
<h2>Random walks</h2>
<p>Imagine going on a walk. Every time you get to an intersection, you flip a coin. If it's heads, you go one block north and one block east. If it's tails, you go one block south and one block east. This is called a random walk. It's a bit like a gambler's profits or losses plotted on a graph as a function of time.</p>
<p>I think there's a huge value in knowing what random walks look like. Do they remind you of anything?</p>
<p><img alt="/img/rw0.5.png" src="/img/rw0.5.png"></p>
<p>Touts are people who sell recommendations about which bets to take. Pay $30 and they'll tell you which side to bet on the big game tonight. (I have a whole section about touts in the book.) The best tout I could find has had pretty steady success for nearly 20 years, with a win rate of 54.1% against the standard vig.  That's statistically significant, but it's not enough to guarantee success moving forwards. Even if they continue to place bets that should win 54.1% of the time -- they're flipping a slightly biased coin -- that doesn't mean they'll make money on those bets. Let's look at some random walks at 54.1% win rate:</p>
<p><img alt="/img/rw0.541.png" src="/img/rw0.541.png"></p>
<p>Three of the random walks ended up around 50 units after 1000 bets, which is pretty good. Two of them made a tiny bit of money. The other four lost money. This is a small sample size, but a 44% chance of losing money after paying for 1,000 picks at $30 a pop isn't great. (More info on the economics of touts in the book.)</p>
<p>The touts I looked at generally don't sell picks for every single game. So with 1200 games in an NBA season, this could be several years' worth of results.</p>
<p>Imagine all of these as 9 different touts, with the exact same level of skill at picking games. But some of them look like geniuses, and some look like bozos. There would probably be some selection bias. The ones with the bad records would drop out -- who's buying their picks if they're losing money?  And the ones who did better than their true skill level of 54.1% would be more likely to stick with it. Yet all these random walks were generated with the same 54.1% win rate.</p>
<p>If you bought 1,000 picks from this tout, you don't get to choose which of the <span class="math">\(2^{1000} = (2^{10})^{100} \approx 10^{300}\)</span> possible random walks you will actually get. If each bet has a 54.1% chance of winning, there's no guarantee you will have exactly 541 wins and 459 losses at the end of 1000 bets. </p>
<p>Here's what someone who is right 60% of the time looks like. </p>
<p><img alt="/img/rw0.6.png" src="/img/rw0.6.png"></p>
<p>Success is pretty boring.</p>
<p>I've always said it's much harder to learn from success than from failure. At a 60% win rate, none of them really have long cold streaks, just small breaks between hot streaks. It wouldn't be interesting to tell stories about those graphs. There's nothing to learn, really.</p>
<p>I don't think it's possible to win 60% against the spread, based on what are called push charts, discussed in the book.</p>
<p>The graphs at the 54.1% success rate appear a lot more human. They have hot and cold streaks, swoons, periods where they seem stuck in a range of values. Some of them <em>scuffled the whole time</em>, a couple <em>finally got locked in near the end</em>, a couple were <em>consistently good</em>. Some had good years, some had bad years. Even though they are randomly generated, they look like they have more to teach us, like they offer more opportunities to tell stories. But they all have the exact same win rate, or level of skill at handicapping.</p>
<p>No outcome is guaranteed, but the higher the win rate, the more consistently the graph is going to go up and to the right at a steady pace. </p>
<p>Finally, here are some walks at 52.4% win rate, the break-even point. Most results end up close to zero after 1000 bets, but there is always a possibility of an extended run towards the positive or negative side -- it happened 4/9 times in this sample:</p>
<p><img alt="/img/rw0.524.png" src="/img/rw0.524.png"></p>
<h3>The Axe Forgets, The Tree Remembers</h3>
<p>If those 9 graphs were stock prices, which one would you consider the best investment? </p>
<p>Well, we know they're equally bad investments. They're winning just enough to break even, but not make profits.</p>
<p>They all have the same Expected Value moving forwards. Previous results are meaningless and have no bearing on whether the next step will be up or down. Every step is the start of an entirely new random walk. The coin doesn't remember what has happened in the past. We do.</p>
<p>This is what's known in math as a <a href="https://en.wikipedia.org/wiki/Martingale_(probability_theory)">Martingale</a>, named after a betting system that was popular in France hundreds of years ago. (I previously talked about Martingales in the series on the hot hand.)</p>
<p>The basic idea behind all these betting systems is to <em>chase</em> losses by betting more when you're losing. Hopefully it's obvious that these chase systems are crazy, though formally proving it led to a lot of interesting math.</p>
<h3>Fallacy and ruin</h3>
<p>Even though chase systems are irrational, they've persisted through the centuries. Human beings are wired to be semi-rational -- we use previous data to try and predict the future, but we use it even when the data was randomly generated, and even when we don't have a significant amount of data. We need coherent stories to tell about why things happened. There is no rational reason to believe in a chase system, but I think there are semi-rational reasons to fall prey to <a href="https://en.wikipedia.org/wiki/Gambler%27s_fallacy">the gambler's fallacy</a>. </p>
<p>I hope these random walks show that having a modest, plausible advantage over the house isn't a guarantee of success, even over a really long timespan. Positive Expected Value is necessary, but not sufficient, for making money long term.</p>
<p>The vast majority of gamblers bet with negative expected value due to the vig, and possibly biases in the lines against <em>public teams</em>, as we saw in a previous installment. If each bet the average gambler makes has a negative expected value, they can't fix that by betting MORE.  </p>
<p>"If I keep doubling down, eventually I'll win it all back." Maybe if you have infinite capital and unlimited time. Otherwise the <a href="https://en.wikipedia.org/wiki/Gambler%27s_ruin">Gambler's Ruin</a> is certain. The market can stay liquid longer than you can stay irrational.</p>
<h2>Maximizing profits: the Kelly criterion</h2>
<p>Let's say a bettor really does have an edge over the house -- they can beat the spreads on NBA basketball 56% of the time.</p>
<p>Even with that advantage, it's easy to go broke betting too much at once. Suppose they bet 25% of their bankroll on each bet.  What happens after 200 bets?  200 bets is not a lot, roughly 1 month of NBA games if they bet on every game.</p>
<p>Once in a blue moon they end up a big winner, but 53% of the time the gambler is left with less than 5% of their bankroll after 200 bets even though they have a pretty healthy advantage over the house. So it's still a game of chance rather than skill, even though it would require a lot of mental labor to make the picks, and time to actually bet the picks. The mean rate of return is quite impressive (turning $100 into $4,650), but the median result is bankruptcy (turning $100 into $3).</p>
<p>Intuitively, there has to be some connection between the betting advantage and the optimal amount to risk on each bet. If a gambler only has a tiny advantage, they should only be making tiny bets as a percentage of their total bankroll. The better they are, the more they can risk. And if they have no advantage, they shouldn't bet real money at all.</p>
<p>That intuition is correct. The Kelly criterion gives a formula for the exact percent of the bankroll to risk on each bet in order to maximize Expected Value, given a certain level of advantage. <a href="https://en.wikipedia.org/wiki/Kelly_criterion">https://en.wikipedia.org/wiki/Kelly_criterion</a></p>
<p>In this case, the Kelly criterion says to bet 7.6% of the total bankroll on each bet.  I did 100,000 simulations of a sequence of 200 bets following the Kelly criterion. The gambler only went broke around one time in 1,000, which is much better. The median result was turning $100 into $168, which is pretty good. However, the gambler still lost money 31% of the time.</p>
<p>This is just one month of betting, assuming the gambler bets on every NBA game. Losing money 31% of the time seems pretty high for what's supposed to be the optimal way to bet.  </p>
<p>How about a longer period of time? I simulated 1,000 bets this time, nearly a whole season of the NBA. The median outcome is turning $100 into $1356, which is a sweet rate of return. But the chances of going broke actually increased! The player will go broke 1.4% of the time, about 11x more often on 1000 bets than 200, which seems unfair, but the Kelly criterion doesn't make any guarantees about not going broke. It just offers the way to optimize Expected Value if the gambler knows the exact advantage they have over the house.</p>
<h3>Partial Kelly Betting</h3>
<p>Kelly Betting is the optimal way to maximize profits, but what about lower stakes? The real power of Kelly betting is its compounding nature -- as the bankroll gets bigger or smaller, the bet size scales up or down as well. It also corresponds to our incorrect intuitive understanding of randomness -- it makes sense someone should bet smaller amounts when they're on a <em>cold streak</em>, and larger amounts when they're on a <em>hot streak</em>. </p>
<p>What if the gambler only bets 2% of their bankroll instead of the 7.6% recommended by the Kelly criterion? They don't go broke a single time in 100,000 simulations of 1,000 bets.  The mean rate of return is 4.6x and the median is 3.7x. That's a pretty nice return on investment, relative to the risk. The gambler still lost money 2.8% of the time, though. Being conservative, betting a lot of games at positive expected value, and betting the right way greatly increase the chances of success, but nothing can eliminate the possibility of failure.</p>
<p>Imagine doing 1000 bets at 56% win percentage and a conservative bet size, and still losing money. Wild, isn't it? If you take one thing away from this article, it should be:</p>
<h1>Failure is always an option.</h1>
<h3>Betting a constant amount</h3>
<p>You wouldn't have that problem with betting a constant amount, right? Say a gambler has a bankroll of $100 and bets to win $20 on each game. 1000 games, 56 win %.</p>
<p>This Expected Value of playing this way doesn't have any randomness in it. It's just a simple algebra problem. According to EV, they should end up with $252 at the end of the season, for a profit of $152. Nice. But as I've mentioned before, EV says nothing about the range of possible outcomes.</p>
<p>If I actually simulate it, a pretty wide range of outcomes are possible. 99% of the time, the gambler makes money, but 6 times out of 100,000, they lose everything and more. (6 in 100,000 is about the same odds as winning a 14 leg parlay.)</p>
<p>With betting a fixed size, the rate of return is lower and the risk of going broke doesn't go away. So it's sub-optimal compared to Kelly-style betting with a very small percentage of the total bankroll.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                <div class="clear"></div>

                <div class="info">
                    <a href="/do-you-wanna-win.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/sports-betting.html" rel="tag">sports betting</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/basketball.html" class="tags">basketball</a>
                    &nbsp;<a href="/tag/your-parlay-sucks.html" class="tags">your parlay sucks</a>
                </div>
            </article>            <h4 class="date">Jul 31, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/harmonics.html" rel="bookmark" title="Permanent Link to &quot;Harmonics&quot;">Harmonics</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=5Ocq8UlLuuw" target="_blank"><img alt="Donna Summer and Giorgio Moroder, &quot;I Feel Love&quot; (Patrick Cowley Remix)" src="https://img.youtube.com/vi/5Ocq8UlLuuw/0.jpg"></a></p>
<p>Song: <a href="https://www.youtube.com/watch?v=5Ocq8UlLuuw" target="_blank">Donna Summer and Giorgio Moroder, "I Feel Love" (Patrick Cowley Remix)</a></p>
<p>Notebook: <a href="https://github.com/csdurfee/csdurfee.github.io/blob/main/harmonics.ipynb">https://github.com/csdurfee/csdurfee.github.io/blob/main/harmonics.ipynb</a></p>
<p>I was gonna do random walks this week, but the thing about random walks is you don't know where you're gonna end up, and I ended up back at last week's topic again. </p>
<p>Last time, we saw that the sine wave, sawtooth wave and square wave produced very different distributions.</p>
<p>All three waveforms are used in electronic music, and they all have different acoustic properties. A sine wave sounds like a "boop" -- think of the sound they play to censor someone who says a swear word on the TV.  That's a sine wave with a frequency of 1000Hz. Sawtooth waves are extremely buzzy. A square wave has, ironically, kind of a round sound, at least as far as how it gets used in electronic music.  A good example is the bass line to this week's song. </p>
<p>It's not a pure square wave, and it's rare to ever hear pure sawtooth or square waves because they're harsh on the ears. Usually multiple waveforms are combined together and then passed through various filters and effects -- in other words, synthesized. </p>
<p>Pretty much every sound you've ever heard is a mix of different frequencies. Only sine waves are truly pure, just a single frequency. I tried looking for an actual musical instrument that produces pure sine waves, and the closest thing (according to the internet, at least) is a tuning fork. </p>
<p>Any other musical instrument, or human voice, or backfiring car, will produce overtones. There's one note that is perceived as the <em>fundamental frequency</em>, but every sound is kind of like a little chord when the overtones are included. </p>
<p>For musical instruments, the loudest overtones are generally at frequencies that are a multiple of the original frequency. These overtones are called <em>harmonics</em>.</p>
<p>For instance, if I play a note at 400 Hz on a guitar, it will also produce harmonics at 800 Hz (2x the fundamental frequency), 1200 Hz (3x), 1600 Hz (4x), 2000 Hz (5x), and so on. This corresponds to the <a href="https://en.wikipedia.org/wiki/Harmonic_series_(mathematics)">harmonic series in mathematics</a>. It's the sum of the ratios of the wavelengths of the harmonics to the fundamental frequency: 1 + 1/2 + 1/3 + 1/4 + 1/5 + ...</p>
<h3>The clarinet is the squarest instrument</h3>
<p>I played the clarinet in grade school and I am the biggest dork on the planet, so it's certainly metaphorically true. But it's also literally true.</p>
<p>There's a lot that goes into exactly which overtones get produced by a physical instrument, but most instruments put out the whole series of harmonics. <a href="https://newt.phys.unsw.edu.au/jw/clarinetacoustics.html#harmonics">The clarinet is different</a>. Because of a clarinet's physical shape, it pretty much only produces odd harmonics. So, in our example, 400 Hz, 1200 Hz, 2000 Hz, etc.</p>
<p>The square wave is like an idealized version of a clarinet -- it also only puts out odd harmonics. This is a result of how a square wave is constructed. In the real world, they're formed out of a combination of sine waves. Which sine waves? You guessed it -- the ones that correspond to the odd harmonic frequencies.</p>
<p>Here's the fundamental frequency combined with the 3rd harmonic:</p>
<p><img alt="/img/square3.png" src="/img/square3.png"></p>
<p>It already looks a bit square-wavey. Additional harmonics make the square parts a bit more square.  Here's what it looks like going up to the 19th harmonic:</p>
<p><img alt="/img/square21.png" src="/img/square21.png"></p>
<p>In the real world, we can only add a finite number of harmonics, but if we could combine an infinite number of them, we would get the ideal square wave. This is called the <a href="https://en.wikipedia.org/wiki/Fourier_series">Fourier series</a> of the square wave.</p>
<p>Here's an illustration to help show how the square wave gets built up:</p>
<p><img alt="/img/square-buildup.png" src="/img/square-buildup.png"></p>
<p>The red wave is the fundamental frequency. The orange square-ish wave is the result of combining the other colored waves with the red wave.</p>
<p>The sum normally would be scaled up a bit (multiplied by 4/pi), but it's easier without the scaling to see how the other waves sort of hammer the fundamental frequency into the shape of the square wave. At some points they are pushing it up, and other points pulling it down.</p>
<p>Perhaps this graph makes it clearer. The red is the fundamental, the yellow is the sum of all the other harmonics, and the orange is the combination of the two:</p>
<p><img alt="/img/combine-harmonics-square.png" src="/img/combine-harmonics-square.png"></p>
<p>Where the yellow is above the X axis, it's pulling the fundamental frequency up, and where it's below, it's pulling the fundamental down.</p>
<h3>The sawtooth</h3>
<p>A sawtooth wave is what you get when you combine all the harmonics, odd and even. Like the square wave, it starts to take its basic shape right away. Here's the fundamental plus the second harmonic:</p>
<p><img alt="/img/sawtooth2.png" src="/img/sawtooth2.png"></p>
<p>And here it is going all the way up to the 10th harmonic:</p>
<p><img alt="/img/sawtooth10.png" src="/img/sawtooth10.png"></p>
<p>Red fundamental plus yellow harmonics produce the orange sawtooth wave:</p>
<p><img alt="/img/combine-harmonics-saw.png" src="/img/combine-harmonics-saw.png"></p>
<p>Last time, I talked about the sawtooth wave producing a uniform distribution of amplitudes -- the butter gets spread evenly over the toast. The graph above isn't a very smooth stroke of butter. It's not steadily decreasing, particularly at the ends. Here's what the distribution looks like at this point:</p>
<p><img alt="/img/sawtooth10-amps.png" src="/img/sawtooth10-amps.png"></p>
<p>With an infinite series of harmonics, that graph will even out to a uniform distribution</p>
<h3>Getting even</h3>
<p>What about only the even harmonics? Is that a thing? Not in the natural world as far as I know, but there's nothing stopping me from making one. (It wouldn't be the worst musical crime I've ever committed.)</p>
<p>Here's what a combo of just the even harmonics looks like:</p>
<p><img alt="/img/even-harmonics.png" src="/img/even-harmonics.png"></p>
<p>Thanks to a little code from the pygame project, it's easy to turn that waveform into a sound file. It sounds like an angry computer beep, with a little flutter mixed in.</p>
<p><a href="/audio/evens_clean.wav" target="_blank">Here's an audio sample</a></p>
<h3>In my prime</h3>
<p>The <a href="https://mathworld.wolfram.com/HarmonicSeriesofPrimes.html">harmonic series of primes</a> is what it sounds like: the harmonic series, but just the prime numbers: 1 + 1/2 + 1/3 + 1/5 + 1/7 + 1/11 + 1/13 + ....</p>
<p>Although it's important in mathematics, I don't have a good musical reason to do this. But if you can throw the prime numbers into something, you gotta do it.</p>
<p>As a sound, I kinda like it. It's nice and throaty. <a href="/audio/primes.wav" target="_blank">Here's what it sounds like.</a></p>
<p>It doesn't really sound like a sawtooth wave or a square wave to me. Here's the waveform:</p>
<p><img alt="/img/prime-waveform.png" src="/img/prime-waveform.png"></p>
<p>Here's what the distribution of amplitudes looks like:</p>
<p><img alt="/img/prime-amp.png" src="/img/prime-amp.png"></p>
<h3>Dissonance</h3>
<p>Some of the overtones of the harmonic series don't correspond with the 12 notes of the modern western musical scale (called 12 tone equal temprament, or 12TET). The first 4 harmonics of the series are nice and clean, but after that they get weird. Each harmonic in the series is smaller in amplitude than the previous one, so it has less of an effect on the shape of the final wave. So the dissonance is there, but it's way in the background.</p>
<p>The prime number bloop I made above should be extra <em>weird</em>. The 2nd and 3rd harmonics are included, so those will sound nice, but after that they are at least a little off the standard western scale.</p>
<p>Say we're playing the <em>prime bloop</em> at A4 (the standard pitch used for tuning).  Here's how the harmonics work out. A cent is 1% of a semitone. So a note that is off by 50 cents is right between two notes on the 12 tone scale.</p>
<table>
<thead>
<tr>
<th>harmonic #</th>
<th>frequency</th>
<th>pitch</th>
<th>error</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>440 Hz</td>
<td>A4</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>880 Hz</td>
<td>A5</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1320</td>
<td>E6</td>
<td>+2 cents</td>
</tr>
<tr>
<td>5</td>
<td>2200</td>
<td>C#7</td>
<td>-14 cents</td>
</tr>
<tr>
<td>7</td>
<td>3080</td>
<td>G7</td>
<td>+31 cents</td>
</tr>
<tr>
<td>11</td>
<td>4840</td>
<td>D#8</td>
<td>-49 cents</td>
</tr>
<tr>
<td>13</td>
<td>5720</td>
<td>F8</td>
<td>+41 cents</td>
</tr>
<tr>
<td>17</td>
<td>7480</td>
<td>A#8</td>
<td>+5 cents</td>
</tr>
</tbody>
</table>
<p>(Note the 3rd harmonic, E6, is a little <em>off</em> in 12TET, despite being a <em>perfect fifth</em> -- an exact 3:2 ratio with the A5.)</p>
<h3>Harmonics aren't everything</h3>
<p>While it's true that any audio can be decomposed into a bunch of sine waves, the fundamental frequency and the harmonics aren't really what gives an instrument its unique timbre. It's hundreds or thousands of tiny overtones that don't line up with the harmonics.</p>
<p>Here are the spectra of two different piano sounds playing at 220 Hz. One is a somewhat fake piano sound (Fruity DX10), the other a natural, rich sounding one (LABS Soft Piano, which you might've heard before if you listen to those "Lofi Hip Hop Beats to Doomscroll/Not Study To" playlists). Can you guess which is which?</p>
<p><img alt="/img/real-piano.png" src="/img/real-piano.png"></p>
<p><img alt="/img/fake-piano.png" src="/img/fake-piano.png"></p>
<p>The answer may surprise you. I mean, it can't be that surprising since there are only 2 options. But I'd probably get it wrong, if I didn't already know which is which.</p>
<h3>Sources/Notes</h3>
<p><a href="https://www.phys.unsw.edu.au/music/">This website from UNSW was invaluable</a>, particularly <a href="https://newt.phys.unsw.edu.au/jw/harmonics.html">https://newt.phys.unsw.edu.au/jw/harmonics.html</a></p>
<p>Code used to generate the audio: <a href="https://stackoverflow.com/questions/56592522/python-simple-audio-tone-generator">https://stackoverflow.com/questions/56592522/python-simple-audio-tone-generator</a></p>
<p>"The internet" claiming the sound of a tuning fork is a sine wave here (no citation given): <a href="https://en.wikipedia.org/wiki/Tuning_fork#Description">https://en.wikipedia.org/wiki/Tuning_fork#Description</a>.</p>
<p>There are many good videos on Youtube about 12TET and Just Intonation, by people who know more about music than me. Here's one from David Bennett: <a href="https://www.youtube.com/watch?v=7JhVcGtT8z4">https://www.youtube.com/watch?v=7JhVcGtT8z4</a></p>
                <div class="clear"></div>

                <div class="info">
                    <a href="/harmonics.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/math.html" rel="tag">math</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/some-educational-value.html" class="tags">some educational value</a>
                </div>
            </article>            <h4 class="date">Jul 26, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/riding-the-waves.html" rel="bookmark" title="Permanent Link to &quot;Riding the waves&quot;">Riding the waves</a>
                </h2>

                
                

                <p><a href="https://www.youtube.com/watch?v=ko8cJucsbBU" target="_blank"><img alt="Roy of the Ravers, &quot;Emotinium&quot;" src="https://img.youtube.com/vi/ko8cJucsbBU/0.jpg"></a></p>
<p>After spending several weeks in the degenerate world of sports gambling, I figured we should go get some fresh air in the land of pure statistics.</p>
<h2>The Abnormal Distribution</h2>
<p>Everybody knows what the normal distribution looks like, even if they don't know it as such. You know, the bell curve? The one from the memes?</p>
<p>In traditional statistics, the One Big Thing you need to know is called the Central Limit Theorem. It says, if you collect some data and take the average of it, that average (the sample mean) will behave in nice, predictable ways. It's the basis of basically all experimental anything.  If you take a bunch of random samples and calculate the sample mean over and over again, those sample means will look like a normal distribution, if the sample sizes are big enough. That makes it possible to draw big conclusions from relatively small amounts of data.</p>
<p>How big is "big enough"? Well, it partly depends on the shape of the data being sampled from. If the data itself is distributed like a normal distribution, it makes sense that the sample means would also be normally shaped. It takes a smaller sample size to get the sampling distributions looking like a normal distribution.</p>
<p>While a lot of things in life are normally distributed, some of them aren't. The uniform distribution is when every possible outcome is equally likely. Rolling a single die, for instance. 1-6 are all equally likely. Imagine we're trying to estimate the mean value for rolling a standard 6 sided die. </p>
<p>A clever way would be to team up sets of sides - 6 goes with 1, 5 goes with 2, 4 goes with 3. Clearly the mean value has to be 3.5, right?</p>
<p>A less clever way would be to roll a 6 sided die a bunch of times and take the average. We could repeat that process, and track all of these averages. If the sample size is big enough, those averages will make a nice bell curve, with the center at 3.5.</p>
<p>The uniform distribution is sort of obnoxious if you want to calculate the sample mean. The normal distribution, and a lot of other distributions, have a big peak in the middle and tail off towards the edges. If you pick randomly from one of these distributions, it's far more likely to be close to the middle than it is to be far from the middle. With the uniform distribution, every outcome is equally likely:</p>
<p><img alt="/img/uniform.png" src="/img/uniform.png"></p>
<p>Couldn't we do even worse than the uniform distribution, though? What if the tails/outliers were even higher than the center? When I first learned about the Central Limit Theorem, I remember thinking about that - how could you define a distribution to be the most obnoxious one possible? The normal distribution is like a frowny face. The Uniform distribution is like a "not impressed" face. Couldn't we have a smiley face distribution to be the anti-normal distribution?</p>
<h2>Waveforms and probabilities.</h2>
<p>All synthesizers in electronic music use a mix of different types of simple waveforms. The sublime <a href="https://en.wikipedia.org/wiki/Roland_TB-303">TB-303</a> synth line in the song at the top is very simple. The TB-303 a monophonic synth -- a single sawtooth wave (or square wave) with a bunch of filters on top that, in the right hands, turn it from buzzy electronic noise to an emotionally expressive instrument, almost like a digitial violin or human voice.</p>
<p>This got me thinking about what probability distributions based on different types of waveforms would look like. How likely is the waveform to be at each amplitude?</p>
<p>Here's the sawtooth waveform:</p>
<p><img alt="/img/sawtooth.png" src="/img/sawtooth.png"></p>
<p>If we randomly sample from this wave (following a uniform distribution -- all numbers on the x axis are equally likely) and record the y value, then plot the values as a histogram, what would it look like? Think of it like we put a piece of toast on the Y axis of the graph, the X axis is time. How will the butter be distributed? </p>
<p>It should be a flat line, like the Uniform distribution, since each stroke of butter is at a constant rate. We're alternating between a very fast wipe and a slower one, but in both cases, it doesn't spend any more time on one section of bread than another because it's a straight line.</p>
<h2>Advanced breakfast techniques</h2>
<p>A square wave spends almost no time in the middle of the bread, so nearly all the butter will be at the edges. That's not a very interesting graph. What about a sine wave?</p>
<p>The sawtooth wave always has a constant slope, so the butter is evenly applied. With the sine wave, the slope changes over time. Because of that, the butter knife ends up spending more time at the extreme ends of the bread, where the slope is shallow, compared to the middle of the bread. The more vertical the slope, the faster the knife passes over that bit of bread, and the less butter it gets.</p>
<p>If we sample a bunch of values from the sine wave and plot their Y values as a histogram, we'll get something that looks like a smiley face -- lots of butter near the edges, less butter near the center of the toast. Or perhaps, in tribute to Ozzy, the index and pinky fingers of someone throwing the devil horns.</p>
<p><img alt="/img/arcsine-from-sine.png" src="/img/arcsine-from-sine.png"></p>
<p>That's a perfectly valid buttering strategy in my book. The crust near the edges tends to be drier, and so can soak up more butter. You actually want to go a bit thinner in the middle, to maintain the structural integrity of the toast.</p>
<p>This distribution of butter forms a probability distribution called the arcsine distribution. It's an anti-normal distribution -- fat in the tails, skinny in the middle. A "why so serious?" distribution the Joker might appreciate. The mean is the least likely value, rather than the most likely value. And yet, the Central Limit Theorem still holds. The mean of even a fairly small number of values will behave like a Normal distribution.</p>
<p>Here are 1,000 iterations of an average of two samples from the arcsine distribution:</p>
<p><img alt="/img/arcsin-approx-2.png" src="/img/arcsin-approx-2.png"></p>
<p>And averages of 5 samples:</p>
<p><img alt="/img/arcsin-approx-5.png" src="/img/arcsin-approx-5.png"></p>
<p>And 30 samples at a time. Notice how the x range has shrunk down.</p>
<p><img alt="/img/arcsin-approx-30.png" src="/img/arcsin-approx-30.png"></p>
<p>There are a lot of distributions that produce that U-type shape. They're known as <a href="https://en.wikipedia.org/wiki/Bathtub_curve">bathtub curves</a>. They come up when plotting the failure rates of devices (or people). For a lot of things, there's an elevated risk of failure near the beginning and the end, with lower risk in the middle. The curve is showing conditional probability -- for an iPhone to fail on day 500, it has to have not failed on the first 499 days.</p>
<p><img alt="/img/Bathtub_curve.svg" src="/img/Bathtub_curve.svg"></p>
<p>(source: Wikipedia/Public Domain, <a href="https://commons.wikimedia.org/w/index.php?curid=7458336">https://commons.wikimedia.org/w/index.php?curid=7458336</a>)</p>
<h2>Particle man vs triangle man</h2>
<p>The Uniform distribution isn't really that ab-Normal. It's flat, but it's very malleable. It turns into the normal distribution almost instantly. The symmetry helps.</p>
<p>If we take a single sample from a Uniform distribution over and over again, and plot a histogram, it's going to look flat, because every outcome is equally likely.</p>
<p>If we take the sum (or average) of two Uniform random variables, what would that look like? We're going to randomly select two numbers between 0 and 1 and sum them up. The result will be between 0 and 2. But some outcomes will be more likely than others.  The extremes (0 and 2) should be extremely unlikely, right? Both the random numbers would have to be close to 0 for the sum to be, and vice versa. There are a lot of ways to get a sum of 1, though. It could be .9 and .1, or .8 and .2, and so on.</p>
<p>If you look online, you can find many explanations of how to get the PDF of the sum of two Uniform distributions using calculus. (<a href="https://courses.cs.washington.edu/courses/cse312/20su/files/student_drive/5.5.pdf">Here's a good one</a>). While formal proofs are important, it's not very intuitive. So, here's another way to think of it.</p>
<p>Let's say we're taking the sum of two dice instead of two Uniform random variables.  We're gonna start with two 4 sided dice. It will be obvious that we can scale the number of faces up, and the pattern will hold.</p>
<p>What are the possible combinations of dice? The dice are independent, so each combination is equally likely. Let's write them out by columns according to their totals:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(1, 1)</td>
<td>(1,2)</td>
<td>(1,3)</td>
<td>(1,4)</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>(2,1)</td>
<td>(2,2)</td>
<td>(2,3)</td>
<td>(2,4)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>(3,1)</td>
<td>(3,2)</td>
<td>(3,3)</td>
<td>(3,4)</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>(4,1)</td>
<td>(4,2)</td>
<td>(4,3)</td>
<td>(4,4)</td>
</tr>
</tbody>
</table>
<p>If we write all the possibilities out like this, it's gonna look like a trapezoid, whether there are 4 faces on the dice, or 4 bajillion. Each row will have one more column that's blank than the one before, and one column that's on its own off to the right. </p>
<p>If we consolidate the elements, we're gonna get a big triangle, right? Each column up to the mean will have one more combo, and each column after will have one less.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(1, 1)</td>
<td>(1,2)</td>
<td>(1,3)</td>
<td>(1,4)</td>
<td>(2,4)</td>
<td>(3,4)</td>
<td>(4,4)</td>
</tr>
<tr>
<td>-</td>
<td>(2,1)</td>
<td>(2,2)</td>
<td>(2,3)</td>
<td>(3,3)</td>
<td>(4,3)</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>(3,1)</td>
<td>(3,2)</td>
<td>(4,2)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>(4,1)</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>With a slight re-arrangement of values, it's clear the triangle builds up with each extra face we add to the dice.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(1, 1)</td>
<td>(1,2)</td>
<td>(2,2)</td>
<td>(2,3)</td>
<td>(3,3)</td>
<td>(3,4)</td>
<td>(4,4)</td>
</tr>
<tr>
<td>-</td>
<td>(2,1)</td>
<td>(1,3)</td>
<td>(3,2)</td>
<td>(2,4)</td>
<td>(4,3)</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>(3,1)</td>
<td>(1,4)</td>
<td>(4,2)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>(4,1)</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>The results for two 2 sided dice are embedded in the left 3 columns of table, then the results for two 3 sided dice on top of them, then two 4 sided dice. Each additional face will add 2 columns to the right. I'm not gonna formally prove anything, but hopefully it's obvious that it will always make a triangle.</p>
<p>That's the <a href="https://en.wikipedia.org/wiki/Triangular_distribution#Distribution_of_the_mean_of_two_standard_uniform_variables">triangular distribution</a>.</p>
<p>Here's a simulation, calculating the sum of two random uniform variables over and over, and counting their frequencies:</p>
<p><img alt="/img/shaggy-triangle.png" src="/img/shaggy-triangle.png"></p>
<h1>3 is the magic number</h1>
<p>The sum (or average) of 3 Uniform random variables looks a whole lot like the normal distribution. The sides of the triangle round out, and we get something more like a bell curve. It's more than a parabola because the slope is changing on the sides. Here's what it looks like in simulation:</p>
<p><img alt="/img/shaggy-parabola.png" src="/img/shaggy-parabola.png"></p>
<p>Here are three 4 sided dice. It's no longer going up and down by one step per column. The slope is changing as we go up and down the sides.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">3</th>
<th style="text-align: left;">4</th>
<th style="text-align: left;">5</th>
<th style="text-align: left;">6</th>
<th style="text-align: left;">7</th>
<th style="text-align: left;">8</th>
<th style="text-align: left;">9</th>
<th style="text-align: left;">10</th>
<th style="text-align: left;">11</th>
<th style="text-align: left;">12</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">(1, 1, 1)</td>
<td style="text-align: left;">(2, 1, 1)</td>
<td style="text-align: left;">(2, 2, 1)</td>
<td style="text-align: left;">(2, 2, 2)</td>
<td style="text-align: left;">(3, 3, 1)</td>
<td style="text-align: left;">(3, 3, 2)</td>
<td style="text-align: left;">(3, 3, 3)</td>
<td style="text-align: left;">(4, 4, 2)</td>
<td style="text-align: left;">(4, 4, 3)</td>
<td style="text-align: left;">(4, 4, 4)</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 2, 1)</td>
<td style="text-align: left;">(2, 1, 2)</td>
<td style="text-align: left;">(3, 2, 1)</td>
<td style="text-align: left;">(3, 2, 2)</td>
<td style="text-align: left;">(3, 2, 3)</td>
<td style="text-align: left;">(4, 4, 1)</td>
<td style="text-align: left;">(4, 3, 3)</td>
<td style="text-align: left;">(4, 3, 4)</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 1, 2)</td>
<td style="text-align: left;">(1, 2, 2)</td>
<td style="text-align: left;">(3, 1, 2)</td>
<td style="text-align: left;">(3, 1, 3)</td>
<td style="text-align: left;">(2, 3, 3)</td>
<td style="text-align: left;">(4, 3, 2)</td>
<td style="text-align: left;">(4, 2, 4)</td>
<td style="text-align: left;">(3, 4, 4)</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(3, 1, 1)</td>
<td style="text-align: left;">(2, 3, 1)</td>
<td style="text-align: left;">(2, 3, 2)</td>
<td style="text-align: left;">(4, 3, 1)</td>
<td style="text-align: left;">(4, 2, 3)</td>
<td style="text-align: left;">(3, 4, 3)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 3, 1)</td>
<td style="text-align: left;">(2, 1, 3)</td>
<td style="text-align: left;">(2, 2, 3)</td>
<td style="text-align: left;">(4, 2, 2)</td>
<td style="text-align: left;">(4, 1, 4)</td>
<td style="text-align: left;">(3, 3, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 1, 3)</td>
<td style="text-align: left;">(1, 3, 2)</td>
<td style="text-align: left;">(1, 3, 3)</td>
<td style="text-align: left;">(4, 1, 3)</td>
<td style="text-align: left;">(3, 4, 2)</td>
<td style="text-align: left;">(2, 4, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 2, 3)</td>
<td style="text-align: left;">(4, 2, 1)</td>
<td style="text-align: left;">(3, 4, 1)</td>
<td style="text-align: left;">(3, 2, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(4, 1, 1)</td>
<td style="text-align: left;">(4, 1, 2)</td>
<td style="text-align: left;">(3, 1, 4)</td>
<td style="text-align: left;">(2, 4, 3)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 4, 1)</td>
<td style="text-align: left;">(2, 4, 1)</td>
<td style="text-align: left;">(2, 4, 2)</td>
<td style="text-align: left;">(2, 3, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 1, 4)</td>
<td style="text-align: left;">(2, 1, 4)</td>
<td style="text-align: left;">(2, 2, 4)</td>
<td style="text-align: left;">(1, 4, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 4, 2)</td>
<td style="text-align: left;">(1, 4, 3)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">(1, 2, 4)</td>
<td style="text-align: left;">(1, 3, 4)</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
</tbody>
</table>
<p>The notebook has a function to print it for any number of faces and dice. Go crazy if you like, but it quickly becomes illegible.</p>
<p>Here's the results of three 12 sided dice:</p>
<p><img alt="/img/three-twelves.png" src="/img/three-twelves.png"></p>
<p>This isn't a Normal distribution, but it sure looks close to one.   </p>
<h2>Toast triangles</h2>
<p>What if we feed the triangular distribution through the <code>sin()</code> function? To keep the toast analogy going, I guess we're spreading the butter with a sine wave pattern, but changing how hard we're pressing down on the knife to match the triangular distribution -- slow at first, then ramping up, then ramping down.</p>
<p>Turns out, if we take the sine of the sum of two uniform random variables (defined from the range of -pi to +pi), we'll get the arcsin distribution again! [2] I don't know if that's surprising or not, but there you go.</p>
<h2>Knowing your limits</h2>
<p>There's a problem with the toast analogy. (Well, at least one. There may be more, but I ate the evidence.)</p>
<p>The probability density function of the arcsine distribution looks like this:</p>
<p>It goes up to infinity at the edges!</p>
<p><img alt="/img/arcsine-pdf.png" src="/img/arcsine-pdf.png"></p>
<p>The derivative of the <code>arcsin</code> function is <code>1/sqrt(1-x**2)</code> which goes to infinity as x approaches 0 or 1. That's what gives the arcsine distribution its shape. That also sort of breaks the toast analogy. Are we putting an infinite amount of butter on the bread for an infinetesimal amount of time at the ends of the bread? You can break your brain thinking about that, but you should feel confident that we put a finite amount of butter on the toast between any two intervals of time. We're always concerned with the defined amount of area underneath the PDF, not the value at a singular point.</p>
<p>Here's a histogram of the actual arcsine distribution -- 100,000 sample points put into 1,000 bins:</p>
<p><img alt="/img/arcsine-hist.png" src="/img/arcsine-hist.png"></p>
<p>About 9% of the total probability is in the leftmost and rightmost 0.5% of the distribution, so the bins at the edges get really, really tall, but they're also really, really skinny. there's a bound on how big they can be.</p>
<p>The CDF (area under the curve of the PDF) of the arcsine distribution is well behaved, but its slope goes to infinity at the very edges.</p>
<p><img alt="/img/arcsine-cdf.png" src="/img/arcsine-cdf.png"></p>
<h2>One for the road</h2>
<p>The <code>sinc()</code> function is defined as <code>sin(x)/x</code>. It doesn't lead to a well-known distribution as far as I know, but it looks cool, like the logo of some aerospace company from the 1970's, so here you go:</p>
<p><img alt="/img/sinc.png" src="/img/sinc.png"></p>
<p>Would I buy a Camaro with that painted on the hood? Yeah, probably.</p>
<h2>An arcsine of things to come</h2>
<p>The arcsine distribution is extremely important in the field of random walks. Say you flip a coin to decide whether to turn north or south every block. How far north or south of where you started will you end up? How many times will you cross the street you started on?</p>
<p>I showed with the hot hand research that our intuitions about randomness are bad. When it comes to random walks, I think we do even worse. Certain <em>sensible</em> things almost never happen, while <em>weird</em> things happen all the time, and the arcsine distribution explains a lot of that.</p>
<h3>References/further reading</h3>
<ul>
<li><a href="https://www.johndcook.com/blog/2009/02/12/sums-of-uniform-random-values/">https://www.johndcook.com/blog/2009/02/12/sums-of-uniform-random-values/</a></li>
<li>[2] <a href="https://www.jstor.org/stable/2287407">https://www.jstor.org/stable/2287407</a></li>
<li><a href="https://archive.org/details/dli.ernet.5666/">https://archive.org/details/dli.ernet.5666/</a></li>
</ul>
                <div class="clear"></div>

                <div class="info">
                    <a href="/riding-the-waves.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/statistics.html" rel="tag">statistics</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/some-educational-value.html" class="tags">some educational value</a>
                </div>
            </article>            <h4 class="date">Jul 24, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/small-stakes-give-you-the-minimum-blues.html" rel="bookmark" title="Permanent Link to &quot;Small stakes give you the minimum blues&quot;">Small stakes give you the minimum blues</a>
                </h2>

                
                

                <p>(This is an excerpt from a larger project about sports gambling. Code and early drafts of some of the materials can be found at <a href="https://github.com/csdurfee/book">https://github.com/csdurfee/book</a>.)</p>
<p><a href="https://www.youtube.com/watch?v=x8nF8L5Fgzc" target="_blank"><img alt="Spoon, &quot;Small Stakes&quot;" src="https://img.youtube.com/vi/x8nF8L5Fgzc/0.jpg"></a></p>
<p>I'll be talking about "the public" in this installment, by which I mean the side of a wager that gets the most number of bets placed on it.</p>
<p>I talk about the vig a lot without explaining it. It's explained in the book, but the short version is on standard bets, a gambler needs to win at least 52.4% of the time against the spread to break even due to needing to risk $110 to win $100. That $10 difference is the vig -- how the sportsbook makes their money.</p>
<p>In gambling circles, bets are often framed as <em>Vegas</em> or <em>the sharps</em> versus <em>the public</em>. <em>Sharp</em> started out as a term for cheaters -- dishonest bookies setting unfair lines, or <em>card sharps</em> who win thru deception rather than skill. The meaning has changed a bit over time. In modern parlance, a <em>sharp</em> is someone who wagers on sports as a game of skill, making money over the long term by placing bets with positive expected value. But the negative connotation persists in popular chatter about gambling. There's something unseemly about using math to decide which bets to take.</p>
<p>Say there's a game between the Lakers and the Charlotte Hornets, and the Hornets win against the spread. <em>The public</em> lost. What degenerate is betting the Hornets? Sharps, that's who. You'd think <em>the public</em> wouldn't have a problem with <em>the sharps</em> -- at least someone won money off <em>Vegas</em> tonight. Without the <em>sharps</em>, all the money that the public lost would go to Vegas. But <em>Vegas</em> and <em>sharps</em> are often conflated together. It's <em>the public</em> versus everybody.</p>
<p>It seems unlikely to me that it's always <em>the public</em> on one side of the bet and <em>sharps</em> on the other. The public is still right around 50% of the time, right? They can't be drastically worse than a coin flip, so taking the opposite bets can't be drastically better than a coin flip. That means that <em>sharps</em> are going to agree with <em>the public</em> at least some of the time. They might <em>fade the public</em> (bet the opposite side) more often than they agree with the public, but there's probably a fair amount of both.</p>
<h3>How do bettors do against the spread as the season goes on?</h3>
<p>Does the public side do better over time? If records against the spread were random and the lines totally fair, we'd expect the public's winning percentage to bounce around pretty close to 50%, spending about as much time on both sides of the line -- sometimes doing a little better than 50%, sometimes a little worse. Over the course of the season, the public's cumulative record against the spread should get closer and closer to 50%, as the sample variance gets smaller.</p>
<p>Here's the 2024-2025 data. This is the public's winning percentage, graphed as a 100 game moving average:</p>
<p><img alt="2024-ma" src="/img/2024-ma.png"></p>
<p>The white line is the start of the All-Star break. The public was winning well below 50% of their bets until a surge in the 100 or so games before the break, as we can see on the cumulative graph:</p>
<p><img alt="2024-cumu" src="/img/2024-cumu.png"></p>
<p>The public ended up going 584-614 on the season. Someone taking the public side of every bet against the closing line would have lost 91.4 units on the season, for a 48.75% winning percentage.</p>
<p>The yellow line is the break-even point for <em>fading the public</em> -- taking the non-public side on every bet over the season. Up until that surge before the All Star break, it would've been extremely profitable to do so. Even by the end of the year, the public's win percentage didn't get close to 50%. Someone betting at -105 reduced juice could have made .8 units by fading the public on every single bet.</p>
<p>The public were 369-388 when betting on the favorite, and 215-226 betting on the underdog. They went 293-311 when the away team won, and 291-303 when the home team won. They were bad no matter how you slice it.</p>
<p>While that's all super weird, it's only one season. My data source (sportsbookreview.com) only has spotty data for the 2023-24 NBA season, but they do have mostly complete data for 2021-22 and 2022-23. (Nothing before that, unfortunately.)</p>
<h3>2021-22 season</h3>
<p>I have data for 1108 out of 1230 regular season games for 2021-22.</p>
<p>The public went 566-542 on the season, for a loss of 30.2 units, much better than 2024-25.</p>
<p>Here's the 100 game moving average:</p>
<p><img alt="2021-ma" src="/img/2021-ma.png"></p>
<p>Except for a dip in early March, the public did consistently fairly well. Not well enough to make money, but better than 50% win percentage.</p>
<p>On the cumulative graph, while fading the public (yellow line) would have been profitable for the first month or so, the graph spends most of the season over the 50% line. However, it never gets over 52.4%.</p>
<p><img alt="2021-cumu" src="/img/2021-cumu.png"></p>
<h3>2022-23 season</h3>
<p>I have data for 1176 off 1230 games in 2022-23.</p>
<p>The public went 587-589 for the season, for a loss of 61 units on the season. That's remarkably fair, if the vig weren't a factor. Here's the moving average:</p>
<p><img alt="2022-ma" src="/img/2022-ma.png"></p>
<p>And the cumulative:</p>
<p><img alt="2022-cumu" src="/img/2022-cumu.png"></p>
<p>This one is similar to the 2023-24 graph, where the public pretty consistently lost a little bit more the 50% of the time, but not often enough to make fading the public a viable strategy.</p>
<h3>Are team records against the spread random?</h3>
<p>I started to answer this last time, but didn't have time to go deeper. If betting records are random, previous performance gives no information about future performance. Each game is like a coin flip, with equal chances of heads and tails. Teams will have good or bad records against the spread due to chance alone.</p>
<p>However, I gave some plausible reasons why this might not be the case.</p>
<p>The simplest way to test this I could think of was comparing records against the spread in the 1st half of the season to the 2nd half of the season. If the records are random, there should be no correlation between 1st half and 2nd half records.</p>
<p>I found there was a positive correlation between 1st half and 2nd half records in all three seasons I have data for. In 2023-24, the correlation coefficient was .10. In 2022-23, it was .40, and in 2021-22 it was .27. Only 2022-23 was statistically significant. Assuming randomness, positive and negative correlation should be equally likely. So all three being positive is suspicious. I don't think records against ths spread are totally random.</p>
<p>Say we track which teams had winning records against the spread over the 1st half of the season, then bet on those teams for the 2nd half of the season. (I didn't bother to filter out the games where teams with winning records play each other, so this analysis isn't perfect.)</p>
<p>In 2024-25, that would give a record of 297-297 ATS -- can't get more fair than that.</p>
<p>In 2022-23, it would have gone 279-241, for a profit of 13.9 units at standard vig, and a 53.7% winning percentage.</p>
<p>In 2021-22, it would have gone 247-225, for a loss of .5 units and a 52.3% winning percentage.</p>
<p>So, it's definitely not enough to be profitable as a strategy on its own. But it's close, and that's interesting. </p>
<p>A gambler needs to win at least 52.4% of the time to break even against the vig. Say they're picking from a subset of bets that have a 52.3% chance of winning, as the naive strategy achieved in 2021-22. They'd just barely need to do better than flipping a coin to be profitable. That could be much easier than picking from a set of bets with a 50% chance of winning, right?</p>
<h3>Final thoughts</h3>
<p>In all three seasons, the public did a little worse in the first half of the season than the second half. In the two most recent seasons, the cumulative winning percentage was below 50% for nearly the whole season.</p>
<p>That doesn't seem random to me. It makes sense that sportsbooks would offer slightly more favorable odds to the less popular team in order to attract equal money on both sides. It also makes sense that sportsbooks would be happy if the team with more money on it lost over 50% of the time. The difference between the public winning 50% of the time and the public winning 48.5% of the time could be significant on enough betting volume.</p>
<p>In all three seasons, there was a positive correlation between a team's record against the spread over the first half of the season and the second half. The correlation is strong enough that over 3 seasons, it's almost possible to make money by betting on teams with a good first half record.</p>
<p>On both points, I don't have nearly enough data to draw grand conclusions about how "the market" operates -- this is just one sportsbook, and an unknown one at that. Yahoo and DraftKings also provide betting percentage data, which would be useful for cross-checking these trends. I'm going to hold off for now, though -- there are too many other interesting things in the world.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="/small-stakes-give-you-the-minimum-blues.html">posted at 10:20</a>
                    &nbsp;&middot;&nbsp;<a href="/category/sports-betting.html" rel="tag">sports betting</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/basketball.html" class="tags">basketball</a>
                    &nbsp;<a href="/tag/your-parlay-sucks.html" class="tags">your parlay sucks</a>
                </div>
            </article>

                <div class="clear"></div>
                <div class="pages">


                    <a href="/author/casey-durfee2.html" class="next_page">Next&nbsp;&rarr;</a>

                    <span>Page 1 of 3</span>
                </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/tcarwash/blue-penguin-dark">Blue Penguin Dark</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>